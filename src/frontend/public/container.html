<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://unpkg.com/postmate@1.5.2/build/postmate.min.js"></script>
    <style>
      #appcontainer {
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }
      iframe {
        width: 100%;
        height: 100%;
        border: 0;
      }
      body {
        margin: 0;
        padding: 0;
        font-family: sans-serif;
      }
      html, body, #appcontainer {
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="appcontainer">
      <h1>
        Articleman is loading.
      </h1>
      <p>
        Postmate is initializing the Ember container...
      </p>
      <p>
        If this message does not disappear, please check your browser console for errors. Something probably went really wrong.
      </p>
    </div>
    <script>
      const handshake = new Postmate({
        container: document.getElementById('appcontainer'),
        url: 'https://articleman.bluelinden.art/',
      });
      handshake.then(child => {
        child.on('ready', () => {
          console.log('Ember container is ready.');
        });
        child.on('error', err => {
          console.log('Ember container errored.');
          console.log(err);
        });
        child.on('close', () => {
          console.log('Ember container closed.');
        });
      });
      document.querySelectorAll('#appcontainer h1, #appcontainer p').forEach(el => el.style.display = 'none');
    </script>
  </body>
</html>