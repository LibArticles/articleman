function onOpen(){}function setSettings(){}function getSettings(){}function onSelectionChange(){}function showSidebar(){}function showHelp(){}function onInstall(){}(()=>{var t={5877:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=fastChunkString;var o=_interopRequireDefault(i(8705)),a=_interopRequireDefault(i(6740));function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function fastChunkString(t,{size:r,unicodeAware:i=!1}){return t=t||"",i?function getChunksUnicode(t,r){const i=(0,a.default)(t),u=Math.ceil(i/r),c=new Array(u);let l=0,d=0;const h=(0,o.default)(t);for(;l<u;++l,d+=r)c[l]=h.slice(d,d+r).join("");return c}(t,r):function getChunks(t,r){const i=t.length,o=Math.ceil(i/r),a=new Array(o);let u=0,c=0;for(;u<o;++u,c+=r)a[u]=t.substr(c,r);return a}(t,r)}t.exports=fastChunkString},9937:(t,r,i)=>{"use strict";t.exports=({onlyFirst:t=!1}={})=>{const r=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(r,t?void 0:"g")}},8594:(t,r,i)=>{"use strict";t.exports=()=>{const t="\\ud800-\\udfff",r=`[${t}]`,i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]",o="\\ud83c[\\udffb-\\udfff]",a=`[^${t}]`,u="(?:\\uD83C[\\uDDE6-\\uDDFF]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="[\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83C\\uDF93]",d=`${`(?:${i}|${o})`}?`,h="[\\ufe0e\\ufe0f]?",p=h+d+`(?:\\u200d(?:${[a,u,c].join("|")})${h+d})*`,g=`(?:${[`${a}${i}?`,i,u,c,r,l].join("|")})`;return new RegExp(`(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40(?:\\udc65|\\udc73|\\udc77)\\udb40(?:\\udc6e|\\udc63|\\udc6c)\\udb40(?:\\udc67|\\udc74|\\udc73)\\udb40\\udc7f)|${o}(?=${o})|${g+p}`,"g")}},9677:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.config={sort_key:!1}},9618:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=i(9918),a=i(7696),u=i(7646);function decode(t,r){if(""===r||"_"===r)return null;const i=t[a.decodeKey(r)];if(null===i)return i;switch(typeof i){case"undefined":case"number":return i;case"string":switch(i[0]+i[1]){case"b|":return a.decodeBool(i);case"o|":return function decodeObject(t,r){if("o|"===r)return{};const i={},o=r.split("|");let a=decode(t,o[1]);const u=o.length;u-2!=1||Array.isArray(a)||(a=[a]);for(let r=2;r<u;r++){const u=a[r-2];let c=o[r];c=decode(t,c),i[u]=c}return i}(t,i);case"n|":return a.decodeNum(i);case"a|":return function decodeArray(t,r){if("a|"===r)return[];const i=r.split("|"),o=i.length-1,a=new Array(o);for(let r=0;r<o;r++){let o=i[r+1];o=decode(t,o),a[r]=o}return a}(t,i);default:return a.decodeStr(i)}}return o.throwUnknownDataType(i)}r.compress=function compress(t){const r=u.makeInMemoryMemory(),i=u.addValue(r,t,void 0);return[u.memToValues(r),i]},r.decode=decode,r.decompress=function decompress(t){const[r,i]=t;return decode(r,i)}},9918:(t,r,i)=>{"use strict";function getType(t){return Object.prototype.toString.call(t)}Object.defineProperty(r,"__esModule",{value:!0}),r.getType=getType,r.throwUnknownDataType=function throwUnknownDataType(t){throw new TypeError("unsupported data type: "+getType(t))}},7696:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=i(8673);r.encodeNum=function encodeNum(t){return"n|"+o.num_to_s(t)},r.decodeNum=function decodeNum(t){return t=t.replace("n|",""),o.s_to_num(t)},r.decodeKey=function decodeKey(t){return"number"==typeof t?t:o.s_to_int(t)},r.encodeBool=function encodeBool(t){return t?"b|T":"b|F"},r.decodeBool=function decodeBool(t){switch(t){case"b|T":return!0;case"b|F":return!1}return!!t},r.encodeStr=function encodeStr(t){switch(t[0]+t[1]){case"b|":case"o|":case"n|":case"a|":case"s|":t="s|"+t}return t},r.decodeStr=function decodeStr(t){return"s|"===t[0]+t[1]?t.substr(2):t}},9183:(t,r,i)=>{"use strict";function trimUndefinedRecursivelyLoop(t,r){r.add(t);for(const i in t)if(void 0===t[i])delete t[i];else{const o=t[i];o&&"object"==typeof o&&!r.has(o)&&trimUndefinedRecursivelyLoop(o,r)}}Object.defineProperty(r,"__esModule",{value:!0}),r.trimUndefined=function trimUndefined(t){for(const r in t)void 0===t[r]&&delete t[r]},r.trimUndefinedRecursively=function trimUndefinedRecursively(t){trimUndefinedRecursivelyLoop(t,new Set)}},9786:(t,r,i)=>{"use strict";var o=i(9618);r.nN=o.compress,r.Lj=o.decompress,i(9618).decode,i(7646).addValue;var a=i(9183);a.trimUndefined,a.trimUndefinedRecursively},7646:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});const o=i(9677),a=i(9918),u=i(7696),c=i(8673);function makeInMemoryStore(){const t=[];return{forEach(r){for(let i=0;i<t.length;i++)if("break"===r(t[i]))return},add(r){t.push(r)},toArray:()=>t}}function makeInMemoryCache(){const t=Object.create(null),r=Object.create(null);return{getValue:r=>t[r],getSchema:t=>r[t],forEachValue(r){for(const[i,o]of Object.entries(t))if("break"===r(i,o))return},forEachSchema(t){for(const[i,o]of Object.entries(r))if("break"===t(i,o))return},setValue(r,i){t[r]=i},setSchema(t,i){r[t]=i},hasValue:r=>r in t,hasSchema:t=>t in r}}function getValueKey(t,r){if(t.cache.hasValue(r))return t.cache.getValue(r);const i=t.keyCount++,o=c.num_to_s(i);return t.store.add(r),t.cache.setValue(r,o),o}function addValue(t,r,i){if(null===r)return"";switch(typeof r){case"undefined":if(Array.isArray(i))return addValue(t,null,i);break;case"object":if(null===r)return getValueKey(t,null);if(Array.isArray(r)){let i="a";for(let o=0;o<r.length;o++){const a=r[o];i+="|"+(null===a?"_":addValue(t,a,r))}return"a"===i&&(i="a|"),getValueKey(t,i)}{const i=Object.keys(r);if(0===i.length)return getValueKey(t,"o|");let a="o";const u=function getSchema(t,r){o.config.sort_key&&r.sort();const i=r.join(",");if(t.cache.hasSchema(i))return t.cache.getSchema(i);const a=addValue(t,r,void 0);return t.cache.setSchema(i,a),a}(t,i);a+="|"+u;for(const o of i){a+="|"+addValue(t,r[o],r)}return getValueKey(t,a)}case"boolean":return getValueKey(t,u.encodeBool(r));case"number":return getValueKey(t,u.encodeNum(r));case"string":return getValueKey(t,u.encodeStr(r))}return a.throwUnknownDataType(r)}r.memToValues=function memToValues(t){return t.store.toArray()},r.makeInMemoryStore=makeInMemoryStore,r.makeInMemoryCache=makeInMemoryCache,r.makeInMemoryMemory=function makeInMemoryMemory(){return{store:makeInMemoryStore(),cache:makeInMemoryCache(),keyCount:0}},r.addValue=addValue},8673:(t,r,i)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let o="";for(let t=0;t<10;t++){const r=String.fromCharCode(48+t);o+=r}for(let t=0;t<26;t++){const r=String.fromCharCode(65+t);o+=r}for(let t=0;t<26;t++){const r=String.fromCharCode(97+t);o+=r}const a=o.length,u={};for(let t=0;t<a;t++){const r=o[t];u[r]=t}function s_to_int(t){let r=0,i=1;for(let o=t.length-1;o>=0;o--){const c=t[o];let l=u[c];l*=i,r+=l,i*=a}return r}function s_to_big_int(t){let r=BigInt(0),i=BigInt(1);const o=BigInt(a);for(let a=t.length-1;a>=0;a--){const c=t[a];let l=BigInt(u[c]);l*=i,r+=l,i*=o}return r}function int_to_s(t){if(0===t)return o[0];const r=[];for(;0!==t;){const i=t%a,u=o[i];r.push(u),t-=i,t/=a}return r.reverse().join("")}function big_int_to_s(t){const r=BigInt(0),i=BigInt(a);if(t===r)return o[0];const u=[];for(;t!==r;){const r=t%i,a=o[Number(r)];u.push(a),t-=r,t/=i}return u.reverse().join("")}function reverse(t){return t.split("").reverse().join("")}function int_str_to_s(t){const r=+t;return r.toString()===t?int_to_s(r):":"+big_int_to_s(BigInt(t))}function s_to_int_str(t){return":"===t[0]?s_to_big_int(t.substring(1)).toString():s_to_int(t).toString()}r.s_to_int=s_to_int,r.s_to_big_int=s_to_big_int,r.int_to_s=int_to_s,r.big_int_to_s=big_int_to_s,r.num_to_s=function num_to_s(t){if(t<0)return"-"+num_to_s(-t);let r,[i,o]=t.toString().split(".");if(!o)return int_to_s(t);o&&([o,r]=o.split("e")),i=int_str_to_s(i),o=reverse(o),o=int_str_to_s(o);let a=i+"."+o;if(r){switch(a+=".",r[0]){case"+":r=r.slice(1);break;case"-":a+="-",r=r.slice(1)}r=reverse(r),r=int_str_to_s(r),a+=r}return a},r.int_str_to_s=int_str_to_s,r.s_to_num=function s_to_num(t){if("-"===t[0])return-s_to_num(t.substr(1));let[r,i,o]=t.split(".");if(!i)return s_to_int(r);r=s_to_int_str(r),i=s_to_int_str(i),i=reverse(i);let a=r+"."+i;if(o){a+="e";let t=!1;"-"===o[0]&&(t=!0,o=o.slice(1)),o=s_to_int_str(o),o=reverse(o),a+=t?-o:+o}return+a}},5386:(t,r,i)=>{var o=i(6152);t.exports=function castArray(){if(!arguments.length)return[];var t=arguments[0];return o(t)?t:[t]}},6571:(t,r,i)=>{var o=i(3945),a=i(1846),u=i(8028),c=i(2344),l=i(4769);function ListCache(t){var r=-1,i=null==t?0:t.length;for(this.clear();++r<i;){var o=t[r];this.set(o[0],o[1])}}ListCache.prototype.clear=o,ListCache.prototype.delete=a,ListCache.prototype.get=u,ListCache.prototype.has=c,ListCache.prototype.set=l,t.exports=ListCache},9162:(t,r,i)=>{var o=i(7772).Uint8Array;t.exports=o},9432:(t,r,i)=>{t.exports=function apply(t,r,i){switch(i.length){case 0:return t.call(r);case 1:return t.call(r,i[0]);case 2:return t.call(r,i[0],i[1]);case 3:return t.call(r,i[0],i[1],i[2])}return t.apply(r,i)}},7552:(t,r,i)=>{t.exports=function arrayFilter(t,r){for(var i=-1,o=null==t?0:t.length,a=0,u=[];++i<o;){var c=t[i];r(c,i,t)&&(u[a++]=c)}return u}},8333:(t,r,i)=>{var o=i(7832);t.exports=function arrayIncludes(t,r){return!!(null==t?0:t.length)&&o(t,r,0)>-1}},4893:(t,r,i)=>{t.exports=function arrayIncludesWith(t,r,i){for(var o=-1,a=null==t?0:t.length;++o<a;)if(i(r,t[o]))return!0;return!1}},343:(t,r,i)=>{t.exports=function arrayMap(t,r){for(var i=-1,o=null==t?0:t.length,a=Array(o);++i<o;)a[i]=r(t[i],i,t);return a}},8582:(t,r,i)=>{var o=i(3940),a=i(1225);t.exports=function assignMergeValue(t,r,i){(void 0!==i&&!a(t[r],i)||void 0===i&&!(r in t))&&o(t,r,i)}},91:(t,r,i)=>{var o=i(3940),a=i(1225),u=Object.prototype.hasOwnProperty;t.exports=function assignValue(t,r,i){var c=t[r];u.call(t,r)&&a(c,i)&&(void 0!==i||r in t)||o(t,r,i)}},2218:(t,r,i)=>{var o=i(1225);t.exports=function assocIndexOf(t,r){for(var i=t.length;i--;)if(o(t[i][0],r))return i;return-1}},3940:(t,r,i)=>{var o=i(3043);t.exports=function baseAssignValue(t,r,i){"__proto__"==r&&o?o(t,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[r]=i}},9413:(t,r,i)=>{var o=i(9259),a=Object.create,u=function(){function object(){}return function(t){if(!o(t))return{};if(a)return a(t);object.prototype=t;var r=new object;return object.prototype=void 0,r}}();t.exports=u},5308:(t,r,i)=>{var o=i(5463)();t.exports=o},3324:(t,r,i)=>{t.exports=function getValue(t,r){return null==t?void 0:t[r]}},3366:(t,r,i)=>{var o=Object.prototype.toString;t.exports=function objectToString(t){return o.call(t)}},7832:(t,r,i)=>{t.exports=function strictIndexOf(t,r,i){for(var o=i-1,a=t.length;++o<a;)if(t[o]===r)return o;return-1}},4565:(t,r,i)=>{var o=i(6571),a=i(8582),u=i(5308),c=i(5561),l=i(9259),d=i(4225),h=i(2434);t.exports=function baseMerge(t,r,i,p,g){t!==r&&u(r,(function(u,d){if(g||(g=new o),l(u))c(t,r,d,i,baseMerge,p,g);else{var y=p?p(h(t,d),u,d+"",t,r,g):void 0;void 0===y&&(y=u),a(t,d,y)}}),d)}},5561:(t,r,i)=>{var o=i(8582),a=i(2175),u=i(6190),c=i(1522),l=i(8725),d=i(9631),h=i(6152),p=i(3746),g=i(3226),y=i(1049),v=i(9259),m=i(7030),b=i(7598),_=i(2434),w=i(3329);t.exports=function baseMergeDeep(t,r,i,S,k,A,C){var x=_(t,i),O=_(r,i),j=C.get(O);if(j)o(t,i,j);else{var I=A?A(x,O,i+"",t,r,C):void 0,T=void 0===I;if(T){var P=h(O),M=!P&&g(O),R=!P&&!M&&b(O);I=O,P||M||R?h(x)?I=x:p(x)?I=c(x):M?(T=!1,I=a(O,!0)):R?(T=!1,I=u(O,!0)):I=[]:m(O)||d(O)?(I=x,d(x)?I=w(x):v(x)&&!y(x)||(I=l(O))):T=!1}T&&(C.set(O,I),k(I,O,S,A,C),C.delete(O)),o(t,i,I)}}},256:(t,r,i)=>{t.exports=function baseProperty(t){return function(r){return null==r?void 0:r[t]}}},5809:(t,r,i)=>{var o=Math.floor,a=Math.random;t.exports=function baseRandom(t,r){return t+o(a()*(r-t+1))}},6060:(t,r,i)=>{var o=i(3059),a=i(3114),u=i(5251);t.exports=function baseRest(t,r){return u(a(t,r,o),t+"")}},2857:(t,r,i)=>{var o=i(91),a=i(7297),u=i(9045),c=i(9259),l=i(3812);t.exports=function baseSet(t,r,i,d){if(!c(t))return t;for(var h=-1,p=(r=a(r,t)).length,g=p-1,y=t;null!=y&&++h<p;){var v=l(r[h]),m=i;if("__proto__"===v||"constructor"===v||"prototype"===v)return t;if(h!=g){var b=y[v];void 0===(m=d?d(b,v,y):void 0)&&(m=c(b)?b:u(r[h+1])?[]:{})}o(y,v,m),y=y[v]}return t}},6473:(t,r,i)=>{t.exports=function baseTimes(t,r){for(var i=-1,o=Array(t);++i<t;)o[i]=r(i);return o}},7326:(t,r,i)=>{var o=i(5386),a=i(8333),u=i(4893),c=i(9950),l=i(8803),d=i(6909);t.exports=function baseUniq(t,r,i){var h=-1,p=a,g=t.length,y=!0,v=[],m=v;if(i)y=!1,p=u;else if(g>=200){var b=r?null:l(t);if(b)return d(b);y=!1,p=c,m=new o}else m=r?[]:v;e:for(;++h<g;){var _=t[h],w=r?r(_):_;if(_=i||0!==_?_:0,y&&w==w){for(var S=m.length;S--;)if(m[S]===w)continue e;r&&m.push(w),v.push(_)}else p(m,w,i)||(m!==v&&m.push(w),v.push(_))}return v}},9950:(t,r,i)=>{var o=i(7832);t.exports=function arrayIncludes(t,r){return!!(null==t?0:t.length)&&o(t,r,0)>-1}},7297:(t,r,i)=>{var o=i(6152);t.exports=function castArray(){if(!arguments.length)return[];var t=arguments[0];return o(t)?t:[t]}},9882:(t,r,i)=>{var o=i(9162);t.exports=function cloneArrayBuffer(t){var r=new t.constructor(t.byteLength);return new o(r).set(new o(t)),r}},2175:(t,r,i)=>{t=i.nmd(t);var o=i(7772),a=r&&!r.nodeType&&r,u=a&&t&&!t.nodeType&&t,c=u&&u.exports===a?o.Buffer:void 0,l=c?c.allocUnsafe:void 0;t.exports=function cloneBuffer(t,r){if(r)return t.slice();var i=t.length,o=l?l(i):new t.constructor(i);return t.copy(o),o}},6190:(t,r,i)=>{var o=i(9882);t.exports=function cloneTypedArray(t,r){var i=r?o(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}},1522:(t,r,i)=>{t.exports=function copyArray(t,r){var i=-1,o=t.length;for(r||(r=Array(o));++i<o;)r[i]=t[i];return r}},752:(t,r,i)=>{var o=i(91),a=i(3940);t.exports=function copyObject(t,r,i,u){var c=!i;i||(i={});for(var l=-1,d=r.length;++l<d;){var h=r[l],p=u?u(i[h],t[h],h,i,t):void 0;void 0===p&&(p=t[h]),c?a(i,h,p):o(i,h,p)}return i}},7263:(t,r,i)=>{var o=i(6060),a=i(2406);t.exports=function createAssigner(t){return o((function(r,i){var o=-1,u=i.length,c=u>1?i[u-1]:void 0,l=u>2?i[2]:void 0;for(c=t.length>3&&"function"==typeof c?(u--,c):void 0,l&&a(i[0],i[1],l)&&(c=u<3?void 0:c,u=1),r=Object(r);++o<u;){var d=i[o];d&&t(r,d,o,c)}return r}))}},5463:(t,r,i)=>{t.exports=function createBaseFor(t){return function(r,i,o){for(var a=-1,u=Object(r),c=o(r),l=c.length;l--;){var d=c[t?l:++a];if(!1===i(u[d],d,u))break}return r}}},8803:(t,r,i)=>{t.exports=function noop(){}},3043:(t,r,i)=>{var o=i(8761),a=function(){try{var t=o(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=a},1242:(t,r,i)=>{var o="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=o},8761:(t,r,i)=>{t.exports=function getValue(t,r){return null==t?void 0:t[r]}},7353:(t,r,i)=>{var o=i(241)(Object.getPrototypeOf,Object);t.exports=o},8725:(t,r,i)=>{var o=i(9413),a=i(7353),u=i(6001);t.exports=function initCloneObject(t){return"function"!=typeof t.constructor||u(t)?{}:o(a(t))}},9045:(t,r,i)=>{var o=/^(?:0|[1-9]\d*)$/;t.exports=function isIndex(t,r){var i=typeof t;return!!(r=null==r?9007199254740991:r)&&("number"==i||"symbol"!=i&&o.test(t))&&t>-1&&t%1==0&&t<r}},2406:(t,r,i)=>{t.exports=function stubFalse(){return!1}},6001:(t,r,i)=>{t.exports=function stubFalse(){return!1}},3945:(t,r,i)=>{t.exports=function listCacheClear(){this.__data__=[],this.size=0}},1846:(t,r,i)=>{var o=i(2218),a=Array.prototype.splice;t.exports=function listCacheDelete(t){var r=this.__data__,i=o(r,t);return!(i<0)&&(i==r.length-1?r.pop():a.call(r,i,1),--this.size,!0)}},8028:(t,r,i)=>{var o=i(2218);t.exports=function listCacheGet(t){var r=this.__data__,i=o(r,t);return i<0?void 0:r[i][1]}},2344:(t,r,i)=>{var o=i(2218);t.exports=function listCacheHas(t){return o(this.__data__,t)>-1}},4769:(t,r,i)=>{var o=i(2218);t.exports=function listCacheSet(t,r){var i=this.__data__,a=o(i,t);return a<0?(++this.size,i.push([t,r])):i[a][1]=r,this}},241:(t,r,i)=>{t.exports=function overArg(t,r){return function(i){return t(r(i))}}},3114:(t,r,i)=>{var o=i(9432),a=Math.max;t.exports=function overRest(t,r,i){return r=a(void 0===r?t.length-1:r,0),function(){for(var u=arguments,c=-1,l=a(u.length-r,0),d=Array(l);++c<l;)d[c]=u[r+c];c=-1;for(var h=Array(r+1);++c<r;)h[c]=u[c];return h[r]=i(d),o(t,this,h)}}},7772:(t,r,i)=>{var o=i(1242),a="object"==typeof self&&self&&self.Object===Object&&self,u=o||a||Function("return this")();t.exports=u},2434:(t,r,i)=>{t.exports=function safeGet(t,r){if(("constructor"!==r||"function"!=typeof t[r])&&"__proto__"!=r)return t[r]}},6909:(t,r,i)=>{t.exports=function stubArray(){return[]}},5251:(t,r,i)=>{t.exports=function identity(t){return t}},3812:(t,r,i)=>{t.exports=function identity(t){return t}},1225:(t,r,i)=>{t.exports=function eq(t,r){return t===r||t!=t&&r!=r}},2579:(t,r,i)=>{var o=i(3324);t.exports=function get(t,r,i){var a=null==t?void 0:o(t,r);return void 0===a?i:a}},3059:(t,r,i)=>{t.exports=function identity(t){return t}},9631:(t,r,i)=>{t.exports=function stubFalse(){return!1}},6152:(t,r,i)=>{var o=Array.isArray;t.exports=o},7878:(t,r,i)=>{var o=i(1049),a=i(1158);t.exports=function isArrayLike(t){return null!=t&&a(t.length)&&!o(t)}},3746:(t,r,i)=>{var o=i(7878),a=i(5125);t.exports=function isArrayLikeObject(t){return a(t)&&o(t)}},3226:(t,r,i)=>{t.exports=function stubFalse(){return!1}},1049:(t,r,i)=>{var o=i(3366),a=i(9259);t.exports=function isFunction(t){if(!a(t))return!1;var r=o(t);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}},1158:(t,r,i)=>{t.exports=function isLength(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},537:(t,r,i)=>{var o=i(3366),a=i(5125);t.exports=function isNumber(t){return"number"==typeof t||a(t)&&"[object Number]"==o(t)}},9259:(t,r,i)=>{t.exports=function isObject(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}},5125:(t,r,i)=>{t.exports=function isObjectLike(t){return null!=t&&"object"==typeof t}},7030:(t,r,i)=>{var o=i(3366),a=i(7353),u=i(5125),c=Function.prototype,l=Object.prototype,d=c.toString,h=l.hasOwnProperty,p=d.call(Object);t.exports=function isPlainObject(t){if(!u(t)||"[object Object]"!=o(t))return!1;var r=a(t);if(null===r)return!0;var i=h.call(r,"constructor")&&r.constructor;return"function"==typeof i&&i instanceof i&&d.call(i)==p}},7598:(t,r,i)=>{t.exports=function stubFalse(){return!1}},4225:(t,r,i)=>{t.exports=function nativeKeysIn(t){var r=[];if(null!=t)for(var i in Object(t))r.push(i);return r}},8537:(t,r,i)=>{var o=i(4565),a=i(7263)((function(t,r,i){o(t,r,i)}));t.exports=a},2349:(t,r,i)=>{var o=i(5809),a=i(2406),u=i(5707),c=parseFloat,l=Math.min,d=Math.random;t.exports=function random(t,r,i){if(i&&"boolean"!=typeof i&&a(t,r,i)&&(r=i=void 0),void 0===i&&("boolean"==typeof r?(i=r,r=void 0):"boolean"==typeof t&&(i=t,t=void 0)),void 0===t&&void 0===r?(t=0,r=1):(t=u(t),void 0===r?(r=t,t=0):r=u(r)),t>r){var h=t;t=r,r=h}if(i||t%1||r%1){var p=d();return l(t+p*(r-t+c("1e-"+((p+"").length-1))),r)}return o(t,r)}},6765:(t,r,i)=>{var o=i(2857);t.exports=function set(t,r,i){return null==t?t:o(t,r,i)}},5707:(t,r,i)=>{t.exports=function identity(t){return t}},3329:(t,r,i)=>{var o=i(752),a=i(4225);t.exports=function toPlainObject(t){return o(t,a(t))}},5652:(t,r,i)=>{var o=i(7326);t.exports=function uniq(t){return t&&t.length?o(t):[]}},7226:(t,r,i)=>{var o=i(7552),a=i(343),u=i(256),c=i(6473),l=i(3746),d=Math.max;t.exports=function unzip(t){if(!t||!t.length)return[];var r=0;return t=o(t,(function(t){if(l(t))return r=d(t.length,r),!0})),c(r,(function(r){return a(t,u(r))}))}},8705:(t,r,i)=>{"use strict";const o=55296,a=56319,u=56320,c=127462,l=127487,d=127995,h=127999,p=65024,g=65039,y=8400,v=8447,m=8205,b=[776,2359,2359,2367,2367,2984,3007,3021,3633,3635,3648,3657,4352,4449,4520];function runes(t){if("string"!=typeof t)throw new Error("string cannot be undefined or null");const r=[];let i=0,o=0;for(;i<t.length;)o+=nextUnits(i+o,t),isGraphem(t[i+o])&&o++,isVariationSelector(t[i+o])&&o++,isDiacriticalMark(t[i+o])&&o++,isZeroWidthJoiner(t[i+o])?o++:(r.push(t.substring(i,i+o)),i+=o,o=0);return r}function nextUnits(t,r){const i=r[t];if(!function isFirstOfSurrogatePair(t){return t&&betweenInclusive(t[0].charCodeAt(0),o,a)}(i)||t===r.length-1)return 1;const u=i+r[t+1];let c=r.substring(t+2,t+5);return isRegionalIndicator(u)&&isRegionalIndicator(c)||function isFitzpatrickModifier(t){return betweenInclusive(codePointFromSurrogatePair(t),d,h)}(c)?4:2}function isRegionalIndicator(t){return betweenInclusive(codePointFromSurrogatePair(t),c,l)}function isVariationSelector(t){return"string"==typeof t&&betweenInclusive(t.charCodeAt(0),p,g)}function isDiacriticalMark(t){return"string"==typeof t&&betweenInclusive(t.charCodeAt(0),y,v)}function isGraphem(t){return"string"==typeof t&&-1!==b.indexOf(t.charCodeAt(0))}function isZeroWidthJoiner(t){return"string"==typeof t&&t.charCodeAt(0)===m}function codePointFromSurrogatePair(t){return(t.charCodeAt(0)-o<<10)+(t.charCodeAt(1)-u)+65536}function betweenInclusive(t,r,i){return t>=r&&t<=i}t.exports=runes,t.exports.substr=function substring(t,r,i){const o=runes(t);if(void 0===r)return t;if(r>=o.length)return"";const a=o.length-r;let u=r+(void 0===i?a:i);return u>r+a&&(u=void 0),o.slice(r,u).join("")}},6740:(t,r,i)=>{"use strict";const o=i(4673),a=i(8594);t.exports=t=>o(t).match(a()).length},4673:(t,r,i)=>{"use strict";const o=i(9937);t.exports=t=>"string"==typeof t?t.replace(o(),""):t}},r={};function __webpack_require__(i){var o=r[i];if(void 0!==o)return o.exports;var a=r[i]={id:i,loaded:!1,exports:{}};return t[i](a,a.exports,__webpack_require__),a.loaded=!0,a.exports}__webpack_require__.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(t,r)=>{for(var i in r)__webpack_require__.o(r,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:r[i]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";const t=new WeakMap;function getMetadataMap(r,i){return t.get(r)&&t.get(r).get(i)}function ordinaryGetOwnMetadata(t,r,i){if(void 0===r)throw new TypeError;const o=getMetadataMap(r,i);return o&&o.get(t)}function ordinaryDefineOwnMetadata(r,i,o,a){if(a&&!["string","symbol"].includes(typeof a))throw new TypeError;(getMetadataMap(o,a)||function createMetadataMap(r,i){const o=t.get(r)||new Map;t.set(r,o);const a=o.get(i)||new Map;return o.set(i,a),a}(o,a)).set(r,i)}function ordinaryGetMetadata(t,r,i){return ordinaryGetOwnMetadata(t,r,i)?ordinaryGetOwnMetadata(t,r,i):Object.getPrototypeOf(r)?ordinaryGetMetadata(t,Object.getPrototypeOf(r),i):void 0}const r={decorate:function decorate(t,r,i,o){if(!Array.isArray(t)||0===t.length)throw new TypeError;return void 0!==i?function decorateProperty(t,r,i,o){return t.reverse().forEach((t=>{o=t(r,i,o)||o})),o}(t,r,i,o):"function"==typeof r?function decorateConstructor(t,r){return t.reverse().forEach((t=>{const i=t(r);i&&(r=i)})),r}(t,r):void 0},defineMetadata:function defineMetadata(t,r,i,o){ordinaryDefineOwnMetadata(t,r,i,o)},getMetadata:function getMetadata(t,r,i){return ordinaryGetMetadata(t,r,i)},getOwnMetadata:function getOwnMetadata(t,r,i){return ordinaryGetOwnMetadata(t,r,i)},hasMetadata:function hasMetadata(t,r,i){return!!ordinaryGetMetadata(t,r,i)},hasOwnMetadata:function hasOwnMetadata(t,r,i){return!!ordinaryGetOwnMetadata(t,r,i)},metadata:function metadata(t,r){return function decorator(i,o){ordinaryDefineOwnMetadata(t,r,i,o)}}};Object.assign(Reflect,r);var i={Request:"Request",Singleton:"Singleton",Transient:"Transient"},o={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},a={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},u=0;function id(){return u++}var c=function(){function Binding(t,r){this.id=id(),this.activated=!1,this.serviceIdentifier=t,this.scope=r,this.type=o.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return Binding.prototype.clone=function(){var t=new Binding(this.serviceIdentifier,this.scope);return t.activated=t.scope===i.Singleton&&this.activated,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},Binding}(),l="Metadata key was used more than once in a parameter:",d="NULL argument",h="Key Not Found",p="Ambiguous match found for serviceIdentifier:",g="No matching bindings found for serviceIdentifier:",y="Missing required @injectable annotation in:",v="Missing required @inject or @multiInject annotation in:",m="Circular dependency found:",b="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},POST_CONSTRUCT_ERROR=function(t,r){return"@postConstruct error in class "+t+": "+r},PRE_DESTROY_ERROR=function(t,r){return"@preDestroy error in class "+t+": "+r},ON_DEACTIVATION_ERROR=function(t,r){return"onDeactivation() error in class "+t+": "+r},_="Maximum call stack size exceeded",w="named",S="name",k="unmanaged",A="optional",C="inject",x="multi_inject",O="inversify:tagged",j="inversify:tagged_props",I="inversify:paramtypes",T="post_construct",P="pre_destroy";var M=function getNonCustomTagKeys(){return[C,x,S,k,w,A]}(),R=function(){function MetadataReader(){}return MetadataReader.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(I,t),userGeneratedMetadata:Reflect.getMetadata(O,t)||{}}},MetadataReader.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(j,t)||[]},MetadataReader}(),E={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function isStackOverflowExeption(t){return t instanceof RangeError||t.message===_}function getServiceIdentifierAsString(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function listRegisteredBindingsForServiceIdentifier(t,r,i){var o="",a=i(t,r);return 0!==a.length&&(o="\nRegistered bindings:",a.forEach((function(t){var r="Object";null!==t.implementationType&&(r=getFunctionName(t.implementationType)),o=o+"\n "+r,t.constraint.metaData&&(o=o+" - "+t.constraint.metaData)}))),o}function alreadyDependencyChain(t,r){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===r||alreadyDependencyChain(t.parentRequest,r))}function circularDependencyToException(t){t.childRequests.forEach((function(t){if(alreadyDependencyChain(t,t.serviceIdentifier)){var r=function dependencyChainToString(t){var r=function _createStringArr(t,r){void 0===r&&(r=[]);var i=getServiceIdentifierAsString(t.serviceIdentifier);return r.push(i),null!==t.parentRequest?_createStringArr(t.parentRequest,r):r}(t);return r.reverse().join(" --\x3e ")}(t);throw new Error(m+" "+r)}circularDependencyToException(t)}))}function getFunctionName(t){if(t.name)return t.name;var r=t.toString(),i=r.match(/^function\s*([^\s(]+)/);return i?i[1]:"Anonymous function: "+r}var N=function(){function Context(t){this.id=id(),this.container=t}return Context.prototype.addPlan=function(t){this.plan=t},Context.prototype.setCurrentRequest=function(t){this.currentRequest=t},Context}(),B=function(){function Metadata(t,r){this.key=t,this.value=r}return Metadata.prototype.toString=function(){return this.key===w?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},Metadata}(),D=function D(t,r){this.parentContext=t,this.rootRequest=r},L=function(){function LazyServiceIdentifer(t){this._cb=t}return LazyServiceIdentifer.prototype.unwrap=function(){return this._cb()},LazyServiceIdentifer}(),U=function(){function QueryableString(t){this.str=t}return QueryableString.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},QueryableString.prototype.endsWith=function(t){var r,i=t.split("").reverse().join("");return r=this.str.split("").reverse().join(""),this.startsWith.call({str:r},i)},QueryableString.prototype.contains=function(t){return-1!==this.str.indexOf(t)},QueryableString.prototype.equals=function(t){return this.str===t},QueryableString.prototype.value=function(){return this.str},QueryableString}(),W=function(){function Target(t,r,i,o){this.id=id(),this.type=t,this.serviceIdentifier=i;var a="symbol"==typeof r?function getSymbolDescription(t){return t.toString().slice(7,-1)}(r):r;this.name=new U(a||""),this.identifier=r,this.metadata=new Array;var u=null;"string"==typeof o?u=new B(w,o):o instanceof B&&(u=o),null!==u&&this.metadata.push(u)}return Target.prototype.hasTag=function(t){for(var r=0,i=this.metadata;r<i.length;r++){if(i[r].key===t)return!0}return!1},Target.prototype.isArray=function(){return this.hasTag(x)},Target.prototype.matchesArray=function(t){return this.matchesTag(x)(t)},Target.prototype.isNamed=function(){return this.hasTag(w)},Target.prototype.isTagged=function(){return this.metadata.some((function(t){return M.every((function(r){return t.key!==r}))}))},Target.prototype.isOptional=function(){return this.matchesTag(A)(!0)},Target.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===w}))[0]:null},Target.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return M.every((function(r){return t.key!==r}))})):null},Target.prototype.matchesNamedTag=function(t){return this.matchesTag(w)(t)},Target.prototype.matchesTag=function(t){var r=this;return function(i){for(var o=0,a=r.metadata;o<a.length;o++){var u=a[o];if(u.key===t&&u.value===i)return!0}return!1}},Target}(),__spreadArray=function(t,r,i){if(i||2===arguments.length)for(var o,a=0,u=r.length;a<u;a++)!o&&a in r||(o||(o=Array.prototype.slice.call(r,0,a)),o[a]=r[a]);return t.concat(o||Array.prototype.slice.call(r))};function getTargets(t,r,i,o){var a=t.getConstructorMetadata(i),u=a.compilerGeneratedMetadata;if(void 0===u)throw new Error(y+" "+r+".");var c=a.userGeneratedMetadata,l=Object.keys(c),d=0===i.length&&l.length>0,h=l.length>i.length,p=function getConstructorArgsAsTargets(t,r,i,o,a){for(var u=[],c=0;c<a;c++){var l=getConstructorArgsAsTarget(c,t,r,i,o);null!==l&&u.push(l)}return u}(o,r,u,c,d||h?l.length:i.length),g=getClassPropsAsTargets(t,i,r);return __spreadArray(__spreadArray([],p,!0),g,!0)}function getConstructorArgsAsTarget(t,r,i,o,u){var c=u[t.toString()]||[],l=formatTargetMetadata(c),d=!0!==l.unmanaged,h=o[t],p=l.inject||l.multiInject;if((h=p||h)instanceof L&&(h=h.unwrap()),d){if(!r&&(h===Object||h===Function||void 0===h))throw new Error(v+" argument "+t+" in class "+i+".");var g=new W(a.ConstructorArgument,l.targetName,h);return g.metadata=c,g}return null}function _getServiceIdentifierForProperty(t,r,i,o){var a=t||r;if(void 0===a){var u=y+" for property "+String(i)+" in class "+o+".";throw new Error(u)}return a}function getClassPropsAsTargets(t,r,i){for(var o=t.getPropertiesMetadata(r),u=[],c=Object.getOwnPropertySymbols(o),l=0,d=Object.keys(o).concat(c);l<d.length;l++){var h=d[l],p=o[h],g=formatTargetMetadata(p),y=g.targetName||h,v=_getServiceIdentifierForProperty(g.inject,g.multiInject,h,i),m=new W(a.ClassProperty,y,v);m.metadata=p,u.push(m)}var b=Object.getPrototypeOf(r.prototype).constructor;if(b!==Object){var _=getClassPropsAsTargets(t,b,i);u=__spreadArray(__spreadArray([],u,!0),_,!0)}return u}function getBaseClassDependencyCount(t,r){var i=Object.getPrototypeOf(r.prototype).constructor;if(i!==Object){var o=getTargets(t,getFunctionName(i),i,!0),a=o.map((function(t){return t.metadata.filter((function(t){return t.key===k}))})),u=[].concat.apply([],a).length,c=o.length-u;return c>0?c:getBaseClassDependencyCount(t,i)}return 0}function formatTargetMetadata(t){var r={};return t.forEach((function(t){r[t.key.toString()]=t.value})),{inject:r[C],multiInject:r[x],targetName:r[S],unmanaged:r[k]}}var G=function(){function Request(t,r,i,o,a){this.id=id(),this.serviceIdentifier=t,this.parentContext=r,this.parentRequest=i,this.target=a,this.childRequests=[],this.bindings=Array.isArray(o)?o:[o],this.requestScope=null===i?new Map:null}return Request.prototype.addChildRequest=function(t,r,i){var o=new Request(t,this.parentContext,this,r,i);return this.childRequests.push(o),o},Request}();function getBindingDictionary(t){return t._bindingDictionary}function _getActiveBindings(t,r,i,o,a){var u=getBindings(i.container,a.serviceIdentifier),c=[];return u.length===E.NoBindingsAvailable&&i.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(i.container.bind(a.serviceIdentifier).toSelf(),u=getBindings(i.container,a.serviceIdentifier)),c=r?u:u.filter((function(t){var r=new G(t.serviceIdentifier,i,o,t,a);return t.constraint(r)})),function _validateActiveBindingCount(t,r,i,o){switch(r.length){case E.NoBindingsAvailable:if(i.isOptional())return r;var a=getServiceIdentifierAsString(t),u=g;throw u+=function listMetadataForTarget(t,r){if(r.isTagged()||r.isNamed()){var i="",o=r.getNamedTag(),a=r.getCustomTags();return null!==o&&(i+=o.toString()+"\n"),null!==a&&a.forEach((function(t){i+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+i}return" "+t}(a,i),u+=listRegisteredBindingsForServiceIdentifier(o,a,getBindings),new Error(u);case E.OnlyOneBindingAvailable:return r;case E.MultipleBindingsAvailable:default:if(i.isArray())return r;a=getServiceIdentifierAsString(t),u=p+" "+a;throw u+=listRegisteredBindingsForServiceIdentifier(o,a,getBindings),new Error(u)}}(a.serviceIdentifier,c,a,i.container),c}function _createSubRequests(t,r,i,a,u,c){var l,d;if(null===u){l=_getActiveBindings(t,r,a,null,c),d=new G(i,a,null,l,c);var h=new D(a,d);a.addPlan(h)}else l=_getActiveBindings(t,r,a,u,c),d=u.addChildRequest(c.serviceIdentifier,l,c);l.forEach((function(r){var i=null;if(c.isArray())i=d.addChildRequest(r.serviceIdentifier,r,c);else{if(r.cache)return;i=d}if(r.type===o.Instance&&null!==r.implementationType){var u=function getDependencies(t,r){return getTargets(t,getFunctionName(r),r,!1)}(t,r.implementationType);if(!a.container.options.skipBaseClassChecks){var l=getBaseClassDependencyCount(t,r.implementationType);if(u.length<l){var h=ARGUMENTS_LENGTH_MISMATCH(getFunctionName(r.implementationType));throw new Error(h)}}u.forEach((function(r){_createSubRequests(t,!1,r.serviceIdentifier,a,i,r)}))}}))}function getBindings(t,r){var i=[],o=getBindingDictionary(t);return o.hasKey(r)?i=o.get(r):null!==t.parent&&(i=getBindings(t.parent,r)),i}function plan(t,r,i,o,a,u,c,l){void 0===l&&(l=!1);var d=new N(r),h=function _createTarget(t,r,i,o,a,u){var c=new B(t?x:C,i),l=new W(r,o,i,c);if(void 0!==a){var d=new B(a,u);l.metadata.push(d)}return l}(i,o,a,"",u,c);try{return _createSubRequests(t,l,a,d,null,h),d}catch(t){throw isStackOverflowExeption(t)&&circularDependencyToException(d.plan.rootRequest),t}}function isPromise(t){return("object"==typeof t&&null!==t||"function"==typeof t)&&"function"==typeof t.then}function isPromiseOrContainsPromise(t){return!!isPromise(t)||Array.isArray(t)&&t.some(isPromise)}var q,__awaiter=function(t,r,i,o){return new(i||(i=Promise))((function(a,u){function fulfilled(t){try{step(o.next(t))}catch(t){u(t)}}function rejected(t){try{step(o.throw(t))}catch(t){u(t)}}function step(t){t.done?a(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,r||[])).next())}))},__generator=function(t,r){var i,o,a,u,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function verb(u){return function(l){return function step(u){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=2&u[0]?o.return:u[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,u[1])).done)return a;switch(o=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,o=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){c.label=u[1];break}if(6===u[0]&&c.label<a[1]){c.label=a[1],a=u;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(u);break}a[2]&&c.ops.pop(),c.trys.pop();continue}u=r.call(t,c)}catch(t){u=[6,t],o=0}finally{i=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},_saveToRequestScope=function(t,r,i){t.has(r.id)||t.set(r.id,i)},_saveToSingletonScope=function(t,r){t.cache=r,t.activated=!0,isPromise(r)&&_saveAsyncResultToSingletonScope(t,r)},_saveAsyncResultToSingletonScope=function(t,r){return __awaiter(void 0,void 0,void 0,(function(){var i,o;return __generator(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,r];case 1:return i=a.sent(),t.cache=i,[3,3];case 2:throw o=a.sent(),t.cache=null,t.activated=!1,o;case 3:return[2]}}))}))};!function(t){t.DynamicValue="toDynamicValue",t.Factory="toFactory",t.Provider="toProvider"}(q||(q={}));var __assign=function(){return __assign=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++)for(var a in r=arguments[i])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},__assign.apply(this,arguments)},instantiation_awaiter=function(t,r,i,o){return new(i||(i=Promise))((function(a,u){function fulfilled(t){try{step(o.next(t))}catch(t){u(t)}}function rejected(t){try{step(o.throw(t))}catch(t){u(t)}}function step(t){t.done?a(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,r||[])).next())}))},instantiation_generator=function(t,r){var i,o,a,u,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function verb(u){return function(l){return function step(u){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=2&u[0]?o.return:u[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,u[1])).done)return a;switch(o=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,o=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){c.label=u[1];break}if(6===u[0]&&c.label<a[1]){c.label=a[1],a=u;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(u);break}a[2]&&c.ops.pop(),c.trys.pop();continue}u=r.call(t,c)}catch(t){u=[6,t],o=0}finally{i=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},instantiation_spreadArray=function(t,r,i){if(i||2===arguments.length)for(var o,a=0,u=r.length;a<u;a++)!o&&a in r||(o||(o=Array.prototype.slice.call(r,0,a)),o[a]=r[a]);return t.concat(o||Array.prototype.slice.call(r))};function _createInstance(t,r,i){var o;if(r.length>0){var u=function _resolveRequests(t,r){return t.reduce((function(t,i){var o=r(i);return i.target.type===a.ConstructorArgument?t.constructorInjections.push(o):(t.propertyRequests.push(i),t.propertyInjections.push(o)),t.isAsync||(t.isAsync=isPromiseOrContainsPromise(o)),t}),{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}(r,i),c=__assign(__assign({},u),{constr:t});o=u.isAsync?function createInstanceWithInjectionsAsync(t){return instantiation_awaiter(this,void 0,void 0,(function(){var r,i;return instantiation_generator(this,(function(o){switch(o.label){case 0:return[4,possiblyWaitInjections(t.constructorInjections)];case 1:return r=o.sent(),[4,possiblyWaitInjections(t.propertyInjections)];case 2:return i=o.sent(),[2,createInstanceWithInjections(__assign(__assign({},t),{constructorInjections:r,propertyInjections:i}))]}}))}))}(c):createInstanceWithInjections(c)}else o=new t;return o}function createInstanceWithInjections(t){var r,i=new((r=t.constr).bind.apply(r,instantiation_spreadArray([void 0],t.constructorInjections,!1)));return t.propertyRequests.forEach((function(r,o){var a=r.target.identifier,u=t.propertyInjections[o];i[a]=u})),i}function possiblyWaitInjections(t){return instantiation_awaiter(this,void 0,void 0,(function(){var r,i,o,a;return instantiation_generator(this,(function(u){for(r=[],i=0,o=t;i<o.length;i++)a=o[i],Array.isArray(a)?r.push(Promise.all(a)):r.push(a);return[2,Promise.all(r)]}))}))}function _getInstanceAfterPostConstruct(t,r){var i=function _postConstruct(t,r){var i,o;if(Reflect.hasMetadata(T,t)){var a=Reflect.getMetadata(T,t);try{return null===(o=(i=r)[a.value])||void 0===o?void 0:o.call(i)}catch(r){throw new Error(POST_CONSTRUCT_ERROR(t.name,r.message))}}}(t,r);return isPromise(i)?i.then((function(){return r})):r}function _validateInstanceResolution(t,r){t.scope!==i.Singleton&&function _throwIfHandlingDeactivation(t,r){var o="Class cannot be instantiated in "+(t.scope===i.Request?"request":"transient")+" scope.";if("function"==typeof t.onDeactivation)throw new Error(ON_DEACTIVATION_ERROR(r.name,o));if(Reflect.hasMetadata(P,r))throw new Error(PRE_DESTROY_ERROR(r.name,o))}(t,r)}var resolver_awaiter=function(t,r,i,o){return new(i||(i=Promise))((function(a,u){function fulfilled(t){try{step(o.next(t))}catch(t){u(t)}}function rejected(t){try{step(o.throw(t))}catch(t){u(t)}}function step(t){t.done?a(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,r||[])).next())}))},resolver_generator=function(t,r){var i,o,a,u,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function verb(u){return function(l){return function step(u){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=2&u[0]?o.return:u[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,u[1])).done)return a;switch(o=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,o=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){c.label=u[1];break}if(6===u[0]&&c.label<a[1]){c.label=a[1],a=u;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(u);break}a[2]&&c.ops.pop(),c.trys.pop();continue}u=r.call(t,c)}catch(t){u=[6,t],o=0}finally{i=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},_resolveRequest=function(t){return function(r){r.parentContext.setCurrentRequest(r);var i=r.bindings,o=r.childRequests,a=r.target&&r.target.isArray(),u=!(r.parentRequest&&r.parentRequest.target&&r.target&&r.parentRequest.target.matchesArray(r.target.serviceIdentifier));if(a&&u)return o.map((function(r){return _resolveRequest(t)(r)}));if(!r.target.isOptional()||0!==i.length){var c=i[0];return _resolveBinding(t,r,c)}}},_resolveFactoryFromBinding=function(t,r){var i=function(t){switch(t.type){case o.Factory:return{factory:t.factory,factoryType:q.Factory};case o.Provider:return{factory:t.provider,factoryType:q.Provider};case o.DynamicValue:return{factory:t.dynamicValue,factoryType:q.DynamicValue};default:throw new Error("Unexpected factory type "+t.type)}}(t);return function(t,r){try{return t()}catch(t){throw isStackOverflowExeption(t)&&(t=r()),t}}((function(){return i.factory.bind(t)(r)}),(function(){return new Error((t=i.factoryType,o=r.currentRequest.serviceIdentifier.toString(),"It looks like there is a circular dependency in one of the '"+t+"' bindings. Please investigate bindings withservice identifier '"+o+"'."));var t,o}))},_getResolvedFromBinding=function(t,r,i){var a,u=r.childRequests;switch(function(t){var r=null;switch(t.type){case o.ConstantValue:case o.Function:r=t.cache;break;case o.Constructor:case o.Instance:r=t.implementationType;break;case o.DynamicValue:r=t.dynamicValue;break;case o.Provider:r=t.provider;break;case o.Factory:r=t.factory}if(null===r){var i=getServiceIdentifierAsString(t.serviceIdentifier);throw new Error("Invalid binding type: "+i)}}(i),i.type){case o.ConstantValue:case o.Function:a=i.cache;break;case o.Constructor:a=i.implementationType;break;case o.Instance:a=function resolveInstance(t,r,i,o){_validateInstanceResolution(t,r);var a=_createInstance(r,i,o);return isPromise(a)?a.then((function(t){return _getInstanceAfterPostConstruct(r,t)})):_getInstanceAfterPostConstruct(r,a)}(i,i.implementationType,u,_resolveRequest(t));break;default:a=_resolveFactoryFromBinding(i,r.parentContext)}return a},_resolveInScope=function(t,r,o){var a=function(t,r){return r.scope===i.Singleton&&r.activated?r.cache:r.scope===i.Request&&t.has(r.id)?t.get(r.id):null}(t,r);return null!==a||function(t,r,o){r.scope===i.Singleton&&_saveToSingletonScope(r,o),r.scope===i.Request&&_saveToRequestScope(t,r,o)}(t,r,a=o()),a},_resolveBinding=function(t,r,i){return _resolveInScope(t,i,(function(){var o=_getResolvedFromBinding(t,r,i);return o=isPromise(o)?o.then((function(t){return _onActivation(r,i,t)})):_onActivation(r,i,o)}))};function _onActivation(t,r,i){var o,a=_bindingActivation(t.parentContext,r,i),u=_getContainersIterator(t.parentContext.container),c=u.next();do{o=c.value;var l=t.parentContext,d=t.serviceIdentifier,h=_getContainerActivationsForService(o,d);a=isPromise(a)?_activateContainerAsync(h,l,a):_activateContainer(h,l,a),c=u.next()}while(!0!==c.done&&!getBindingDictionary(o).hasKey(t.serviceIdentifier));return a}var _bindingActivation=function(t,r,i){return"function"==typeof r.onActivation?r.onActivation(t,i):i},_activateContainer=function(t,r,i){for(var o=t.next();!o.done;){if(isPromise(i=o.value(r,i)))return _activateContainerAsync(t,r,i);o=t.next()}return i},_activateContainerAsync=function(t,r,i){return resolver_awaiter(void 0,void 0,void 0,(function(){var o,a;return resolver_generator(this,(function(u){switch(u.label){case 0:return[4,i];case 1:o=u.sent(),a=t.next(),u.label=2;case 2:return a.done?[3,4]:[4,a.value(r,o)];case 3:return o=u.sent(),a=t.next(),[3,2];case 4:return[2,o]}}))}))},_getContainerActivationsForService=function(t,r){var i=t._activations;return i.hasKey(r)?i.get(r).values():[].values()},_getContainersIterator=function(t){for(var r=[t],i=t.parent;null!==i;)r.push(i),i=i.parent;return{next:function(){var t=r.pop();return void 0!==t?{done:!1,value:t}:{done:!0,value:void 0}}}};var traverseAncerstors=function(t,r){var i=t.parentRequest;return null!==i&&(!!r(i)||traverseAncerstors(i,r))},taggedConstraint=function(t){return function(r){var constraint=function(i){return null!==i&&null!==i.target&&i.target.matchesTag(t)(r)};return constraint.metaData=new B(t,r),constraint}},z=taggedConstraint(w),typeConstraint=function(t){return function(r){var i=null;if(null!==r){if(i=r.bindings[0],"string"==typeof t)return i.serviceIdentifier===t;var o=r.bindings[0].implementationType;return t===o}return!1}},V=function(){function BindingWhenSyntax(t){this._binding=t}return BindingWhenSyntax.prototype.when=function(t){return this._binding.constraint=t,new K(this._binding)},BindingWhenSyntax.prototype.whenTargetNamed=function(t){return this._binding.constraint=z(t),new K(this._binding)},BindingWhenSyntax.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t&&(null!==t.target&&!t.target.isNamed()&&!t.target.isTagged())},new K(this._binding)},BindingWhenSyntax.prototype.whenTargetTagged=function(t,r){return this._binding.constraint=taggedConstraint(t)(r),new K(this._binding)},BindingWhenSyntax.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(r){return null!==r&&typeConstraint(t)(r.parentRequest)},new K(this._binding)},BindingWhenSyntax.prototype.whenParentNamed=function(t){return this._binding.constraint=function(r){return null!==r&&z(t)(r.parentRequest)},new K(this._binding)},BindingWhenSyntax.prototype.whenParentTagged=function(t,r){return this._binding.constraint=function(i){return null!==i&&taggedConstraint(t)(r)(i.parentRequest)},new K(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(r){return null!==r&&traverseAncerstors(r,typeConstraint(t))},new K(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(r){return null!==r&&!traverseAncerstors(r,typeConstraint(t))},new K(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(r){return null!==r&&traverseAncerstors(r,z(t))},new K(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(r){return null!==r&&!traverseAncerstors(r,z(t))},new K(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorTagged=function(t,r){return this._binding.constraint=function(i){return null!==i&&traverseAncerstors(i,taggedConstraint(t)(r))},new K(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorTagged=function(t,r){return this._binding.constraint=function(i){return null!==i&&!traverseAncerstors(i,taggedConstraint(t)(r))},new K(this._binding)},BindingWhenSyntax.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(r){return null!==r&&traverseAncerstors(r,t)},new K(this._binding)},BindingWhenSyntax.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(r){return null!==r&&!traverseAncerstors(r,t)},new K(this._binding)},BindingWhenSyntax}(),K=function(){function BindingOnSyntax(t){this._binding=t}return BindingOnSyntax.prototype.onActivation=function(t){return this._binding.onActivation=t,new V(this._binding)},BindingOnSyntax.prototype.onDeactivation=function(t){return this._binding.onDeactivation=t,new V(this._binding)},BindingOnSyntax}(),H=function(){function BindingWhenOnSyntax(t){this._binding=t,this._bindingWhenSyntax=new V(this._binding),this._bindingOnSyntax=new K(this._binding)}return BindingWhenOnSyntax.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},BindingWhenOnSyntax.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},BindingWhenOnSyntax.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},BindingWhenOnSyntax.prototype.whenTargetTagged=function(t,r){return this._bindingWhenSyntax.whenTargetTagged(t,r)},BindingWhenOnSyntax.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},BindingWhenOnSyntax.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},BindingWhenOnSyntax.prototype.whenParentTagged=function(t,r){return this._bindingWhenSyntax.whenParentTagged(t,r)},BindingWhenOnSyntax.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},BindingWhenOnSyntax.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},BindingWhenOnSyntax.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},BindingWhenOnSyntax.prototype.whenAnyAncestorTagged=function(t,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,r)},BindingWhenOnSyntax.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},BindingWhenOnSyntax.prototype.whenNoAncestorTagged=function(t,r){return this._bindingWhenSyntax.whenNoAncestorTagged(t,r)},BindingWhenOnSyntax.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},BindingWhenOnSyntax.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},BindingWhenOnSyntax.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},BindingWhenOnSyntax.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},BindingWhenOnSyntax}(),Q=function(){function BindingInSyntax(t){this._binding=t}return BindingInSyntax.prototype.inRequestScope=function(){return this._binding.scope=i.Request,new H(this._binding)},BindingInSyntax.prototype.inSingletonScope=function(){return this._binding.scope=i.Singleton,new H(this._binding)},BindingInSyntax.prototype.inTransientScope=function(){return this._binding.scope=i.Transient,new H(this._binding)},BindingInSyntax}(),$=function(){function BindingInWhenOnSyntax(t){this._binding=t,this._bindingWhenSyntax=new V(this._binding),this._bindingOnSyntax=new K(this._binding),this._bindingInSyntax=new Q(t)}return BindingInWhenOnSyntax.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},BindingInWhenOnSyntax.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},BindingInWhenOnSyntax.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},BindingInWhenOnSyntax.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},BindingInWhenOnSyntax.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},BindingInWhenOnSyntax.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},BindingInWhenOnSyntax.prototype.whenTargetTagged=function(t,r){return this._bindingWhenSyntax.whenTargetTagged(t,r)},BindingInWhenOnSyntax.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},BindingInWhenOnSyntax.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},BindingInWhenOnSyntax.prototype.whenParentTagged=function(t,r){return this._bindingWhenSyntax.whenParentTagged(t,r)},BindingInWhenOnSyntax.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},BindingInWhenOnSyntax.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged=function(t,r){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,r)},BindingInWhenOnSyntax.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},BindingInWhenOnSyntax.prototype.whenNoAncestorTagged=function(t,r){return this._bindingWhenSyntax.whenNoAncestorTagged(t,r)},BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},BindingInWhenOnSyntax.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},BindingInWhenOnSyntax.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},BindingInWhenOnSyntax.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},BindingInWhenOnSyntax}(),J=function(){function BindingToSyntax(t){this._binding=t}return BindingToSyntax.prototype.to=function(t){return this._binding.type=o.Instance,this._binding.implementationType=t,new $(this._binding)},BindingToSyntax.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error("The toSelf function can only be applied when a constructor is used as service identifier");var t=this._binding.serviceIdentifier;return this.to(t)},BindingToSyntax.prototype.toConstantValue=function(t){return this._binding.type=o.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=i.Singleton,new H(this._binding)},BindingToSyntax.prototype.toDynamicValue=function(t){return this._binding.type=o.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new $(this._binding)},BindingToSyntax.prototype.toConstructor=function(t){return this._binding.type=o.Constructor,this._binding.implementationType=t,this._binding.scope=i.Singleton,new H(this._binding)},BindingToSyntax.prototype.toFactory=function(t){return this._binding.type=o.Factory,this._binding.factory=t,this._binding.scope=i.Singleton,new H(this._binding)},BindingToSyntax.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error("Value provided to function binding must be a function!");var r=this.toConstantValue(t);return this._binding.type=o.Function,this._binding.scope=i.Singleton,r},BindingToSyntax.prototype.toAutoFactory=function(t){return this._binding.type=o.Factory,this._binding.factory=function(r){return function(){return r.container.get(t)}},this._binding.scope=i.Singleton,new H(this._binding)},BindingToSyntax.prototype.toAutoNamedFactory=function(t){return this._binding.type=o.Factory,this._binding.factory=function(r){return function(i){return r.container.getNamed(t,i)}},new H(this._binding)},BindingToSyntax.prototype.toProvider=function(t){return this._binding.type=o.Provider,this._binding.provider=t,this._binding.scope=i.Singleton,new H(this._binding)},BindingToSyntax.prototype.toService=function(t){this.toDynamicValue((function(r){return r.container.get(t)}))},BindingToSyntax}(),Y=function(){function ContainerSnapshot(){}return ContainerSnapshot.of=function(t,r,i,o,a){var u=new ContainerSnapshot;return u.bindings=t,u.middleware=r,u.deactivations=o,u.activations=i,u.moduleActivationStore=a,u},ContainerSnapshot}();var Z=function(){function Lookup(){this._map=new Map}return Lookup.prototype.getMap=function(){return this._map},Lookup.prototype.add=function(t,r){if(null==t)throw new Error(d);if(null==r)throw new Error(d);var i=this._map.get(t);void 0!==i?i.push(r):this._map.set(t,[r])},Lookup.prototype.get=function(t){if(null==t)throw new Error(d);var r=this._map.get(t);if(void 0!==r)return r;throw new Error(h)},Lookup.prototype.remove=function(t){if(null==t)throw new Error(d);if(!this._map.delete(t))throw new Error(h)},Lookup.prototype.removeIntersection=function(t){var r=this;this.traverse((function(i,o){var a=t.hasKey(i)?t.get(i):void 0;if(void 0!==a){var u=o.filter((function(t){return!a.some((function(r){return t===r}))}));r._setValue(i,u)}}))},Lookup.prototype.removeByCondition=function(t){var r=this,i=[];return this._map.forEach((function(o,a){for(var u=[],c=0,l=o;c<l.length;c++){var d=l[c];t(d)?i.push(d):u.push(d)}r._setValue(a,u)})),i},Lookup.prototype.hasKey=function(t){if(null==t)throw new Error(d);return this._map.has(t)},Lookup.prototype.clone=function(){var t=new Lookup;return this._map.forEach((function(r,i){r.forEach((function(r){return t.add(i,function isClonable(t){return"object"==typeof t&&null!==t&&"clone"in t&&"function"==typeof t.clone}(r)?r.clone():r)}))})),t},Lookup.prototype.traverse=function(t){this._map.forEach((function(r,i){t(i,r)}))},Lookup.prototype._setValue=function(t,r){r.length>0?this._map.set(t,r):this._map.delete(t)},Lookup}(),X=function(){function ModuleActivationStore(){this._map=new Map}return ModuleActivationStore.prototype.remove=function(t){if(this._map.has(t)){var r=this._map.get(t);return this._map.delete(t),r}return this._getEmptyHandlersStore()},ModuleActivationStore.prototype.addDeactivation=function(t,r,i){this._getModuleActivationHandlers(t).onDeactivations.add(r,i)},ModuleActivationStore.prototype.addActivation=function(t,r,i){this._getModuleActivationHandlers(t).onActivations.add(r,i)},ModuleActivationStore.prototype.clone=function(){var t=new ModuleActivationStore;return this._map.forEach((function(r,i){t._map.set(i,{onActivations:r.onActivations.clone(),onDeactivations:r.onDeactivations.clone()})})),t},ModuleActivationStore.prototype._getModuleActivationHandlers=function(t){var r=this._map.get(t);return void 0===r&&(r=this._getEmptyHandlersStore(),this._map.set(t,r)),r},ModuleActivationStore.prototype._getEmptyHandlersStore=function(){return{onActivations:new Z,onDeactivations:new Z}},ModuleActivationStore}(),container_assign=function(){return container_assign=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++)for(var a in r=arguments[i])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},container_assign.apply(this,arguments)},container_awaiter=function(t,r,i,o){return new(i||(i=Promise))((function(a,u){function fulfilled(t){try{step(o.next(t))}catch(t){u(t)}}function rejected(t){try{step(o.throw(t))}catch(t){u(t)}}function step(t){t.done?a(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,r||[])).next())}))},container_generator=function(t,r){var i,o,a,u,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function verb(u){return function(l){return function step(u){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=2&u[0]?o.return:u[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,u[1])).done)return a;switch(o=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,o=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){c.label=u[1];break}if(6===u[0]&&c.label<a[1]){c.label=a[1],a=u;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(u);break}a[2]&&c.ops.pop(),c.trys.pop();continue}u=r.call(t,c)}catch(t){u=[6,t],o=0}finally{i=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}},container_spreadArray=function(t,r,i){if(i||2===arguments.length)for(var o,a=0,u=r.length;a<u;a++)!o&&a in r||(o||(o=Array.prototype.slice.call(r,0,a)),o[a]=r[a]);return t.concat(o||Array.prototype.slice.call(r))},ee=function(){function Container(t){var r=t||{};if("object"!=typeof r)throw new Error("Invalid Container constructor argument. Container options must be an object.");if(void 0===r.defaultScope)r.defaultScope=i.Transient;else if(r.defaultScope!==i.Singleton&&r.defaultScope!==i.Transient&&r.defaultScope!==i.Request)throw new Error("Invalid Container option. Default scope must be a string ('singleton' or 'transient').");if(void 0===r.autoBindInjectable)r.autoBindInjectable=!1;else if("boolean"!=typeof r.autoBindInjectable)throw new Error("Invalid Container option. Auto bind injectable must be a boolean");if(void 0===r.skipBaseClassChecks)r.skipBaseClassChecks=!1;else if("boolean"!=typeof r.skipBaseClassChecks)throw new Error("Invalid Container option. Skip base check must be a boolean");this.options={autoBindInjectable:r.autoBindInjectable,defaultScope:r.defaultScope,skipBaseClassChecks:r.skipBaseClassChecks},this.id=id(),this._bindingDictionary=new Z,this._snapshots=[],this._middleware=null,this._activations=new Z,this._deactivations=new Z,this.parent=null,this._metadataReader=new R,this._moduleActivationStore=new X}return Container.merge=function(t,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=new Container,u=container_spreadArray([t,r],i,!0).map((function(t){return getBindingDictionary(t)})),c=getBindingDictionary(a);return u.forEach((function(t){!function copyDictionary(t,r){t.traverse((function(t,i){i.forEach((function(t){r.add(t.serviceIdentifier,t.clone())}))}))}(t,c)})),a},Container.prototype.load=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var i=this._getContainerModuleHelpersFactory(),o=0,a=t;o<a.length;o++){var u=a[o],c=i(u.id);u.registry(c.bindFunction,c.unbindFunction,c.isboundFunction,c.rebindFunction,c.unbindAsyncFunction,c.onActivationFunction,c.onDeactivationFunction)}},Container.prototype.loadAsync=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return container_awaiter(this,void 0,void 0,(function(){var r,i,o,a,u;return container_generator(this,(function(c){switch(c.label){case 0:r=this._getContainerModuleHelpersFactory(),i=0,o=t,c.label=1;case 1:return i<o.length?(a=o[i],u=r(a.id),[4,a.registry(u.bindFunction,u.unbindFunction,u.isboundFunction,u.rebindFunction,u.unbindAsyncFunction,u.onActivationFunction,u.onDeactivationFunction)]):[3,4];case 2:c.sent(),c.label=3;case 3:return i++,[3,1];case 4:return[2]}}))}))},Container.prototype.unload=function(){for(var t=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];r.forEach((function(r){var i=t._removeModuleBindings(r.id);t._deactivateSingletons(i),t._removeModuleHandlers(r.id)}))},Container.prototype.unloadAsync=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return container_awaiter(this,void 0,void 0,(function(){var r,i,o,a;return container_generator(this,(function(u){switch(u.label){case 0:r=0,i=t,u.label=1;case 1:return r<i.length?(o=i[r],a=this._removeModuleBindings(o.id),[4,this._deactivateSingletonsAsync(a)]):[3,4];case 2:u.sent(),this._removeModuleHandlers(o.id),u.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},Container.prototype.bind=function(t){var r=this.options.defaultScope||i.Transient,o=new c(t,r);return this._bindingDictionary.add(t,o),new J(o)},Container.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},Container.prototype.rebindAsync=function(t){return container_awaiter(this,void 0,void 0,(function(){return container_generator(this,(function(r){switch(r.label){case 0:return[4,this.unbindAsync(t)];case 1:return r.sent(),[2,this.bind(t)]}}))}))},Container.prototype.unbind=function(t){if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t);this._deactivateSingletons(r)}this._removeServiceFromDictionary(t)},Container.prototype.unbindAsync=function(t){return container_awaiter(this,void 0,void 0,(function(){var r;return container_generator(this,(function(i){switch(i.label){case 0:return this._bindingDictionary.hasKey(t)?(r=this._bindingDictionary.get(t),[4,this._deactivateSingletonsAsync(r)]):[3,2];case 1:i.sent(),i.label=2;case 2:return this._removeServiceFromDictionary(t),[2]}}))}))},Container.prototype.unbindAll=function(){var t=this;this._bindingDictionary.traverse((function(r,i){t._deactivateSingletons(i)})),this._bindingDictionary=new Z},Container.prototype.unbindAllAsync=function(){return container_awaiter(this,void 0,void 0,(function(){var t,r=this;return container_generator(this,(function(i){switch(i.label){case 0:return t=[],this._bindingDictionary.traverse((function(i,o){t.push(r._deactivateSingletonsAsync(o))})),[4,Promise.all(t)];case 1:return i.sent(),this._bindingDictionary=new Z,[2]}}))}))},Container.prototype.onActivation=function(t,r){this._activations.add(t,r)},Container.prototype.onDeactivation=function(t,r){this._deactivations.add(t,r)},Container.prototype.isBound=function(t){var r=this._bindingDictionary.hasKey(t);return!r&&this.parent&&(r=this.parent.isBound(t)),r},Container.prototype.isCurrentBound=function(t){return this._bindingDictionary.hasKey(t)},Container.prototype.isBoundNamed=function(t,r){return this.isBoundTagged(t,w,r)},Container.prototype.isBoundTagged=function(t,r,i){var o=!1;if(this._bindingDictionary.hasKey(t)){var u=this._bindingDictionary.get(t),c=function createMockRequest(t,r,i,o){var u=new W(a.Variable,"",r,new B(i,o)),c=new N(t);return new G(r,c,null,[],u)}(this,t,r,i);o=u.some((function(t){return t.constraint(c)}))}return!o&&this.parent&&(o=this.parent.isBoundTagged(t,r,i)),o},Container.prototype.snapshot=function(){this._snapshots.push(Y.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},Container.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error("No snapshot available to restore.");this._bindingDictionary=t.bindings,this._activations=t.activations,this._deactivations=t.deactivations,this._middleware=t.middleware,this._moduleActivationStore=t.moduleActivationStore},Container.prototype.createChild=function(t){var r=new Container(t||this.options);return r.parent=this,r},Container.prototype.applyMiddleware=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,r){return r(t)}),i)},Container.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},Container.prototype.get=function(t){var r=this._getNotAllArgs(t,!1);return this._getButThrowIfAsync(r)},Container.prototype.getAsync=function(t){return container_awaiter(this,void 0,void 0,(function(){var r;return container_generator(this,(function(i){return r=this._getNotAllArgs(t,!1),[2,this._get(r)]}))}))},Container.prototype.getTagged=function(t,r,i){var o=this._getNotAllArgs(t,!1,r,i);return this._getButThrowIfAsync(o)},Container.prototype.getTaggedAsync=function(t,r,i){return container_awaiter(this,void 0,void 0,(function(){var o;return container_generator(this,(function(a){return o=this._getNotAllArgs(t,!1,r,i),[2,this._get(o)]}))}))},Container.prototype.getNamed=function(t,r){return this.getTagged(t,w,r)},Container.prototype.getNamedAsync=function(t,r){return this.getTaggedAsync(t,w,r)},Container.prototype.getAll=function(t){var r=this._getAllArgs(t);return this._getButThrowIfAsync(r)},Container.prototype.getAllAsync=function(t){var r=this._getAllArgs(t);return this._getAll(r)},Container.prototype.getAllTagged=function(t,r,i){var o=this._getNotAllArgs(t,!0,r,i);return this._getButThrowIfAsync(o)},Container.prototype.getAllTaggedAsync=function(t,r,i){var o=this._getNotAllArgs(t,!0,r,i);return this._getAll(o)},Container.prototype.getAllNamed=function(t,r){return this.getAllTagged(t,w,r)},Container.prototype.getAllNamedAsync=function(t,r){return this.getAllTaggedAsync(t,w,r)},Container.prototype.resolve=function(t){var r=this.isBound(t);r||this.bind(t).toSelf();var i=this.get(t);return r||this.unbind(t),i},Container.prototype._preDestroy=function(t,r){if(Reflect.hasMetadata(P,t))return r[Reflect.getMetadata(P,t).value]()},Container.prototype._removeModuleHandlers=function(t){var r=this._moduleActivationStore.remove(t);this._activations.removeIntersection(r.onActivations),this._deactivations.removeIntersection(r.onDeactivations)},Container.prototype._removeModuleBindings=function(t){return this._bindingDictionary.removeByCondition((function(r){return r.moduleId===t}))},Container.prototype._deactivate=function(t,r){var i=this,o=Object.getPrototypeOf(r).constructor;try{if(this._deactivations.hasKey(t.serviceIdentifier)){var a=this._deactivateContainer(r,this._deactivations.get(t.serviceIdentifier).values());if(isPromise(a))return this._handleDeactivationError(a.then((function(){return i._propagateContainerDeactivationThenBindingAndPreDestroyAsync(t,r,o)})),o)}var u=this._propagateContainerDeactivationThenBindingAndPreDestroy(t,r,o);if(isPromise(u))return this._handleDeactivationError(u,o)}catch(t){throw new Error(ON_DEACTIVATION_ERROR(o.name,t.message))}},Container.prototype._handleDeactivationError=function(t,r){return container_awaiter(this,void 0,void 0,(function(){var i;return container_generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t];case 1:return o.sent(),[3,3];case 2:throw i=o.sent(),new Error(ON_DEACTIVATION_ERROR(r.name,i.message));case 3:return[2]}}))}))},Container.prototype._deactivateContainer=function(t,r){for(var i=this,o=r.next();o.value;){var a=o.value(t);if(isPromise(a))return a.then((function(){return i._deactivateContainerAsync(t,r)}));o=r.next()}},Container.prototype._deactivateContainerAsync=function(t,r){return container_awaiter(this,void 0,void 0,(function(){var i;return container_generator(this,(function(o){switch(o.label){case 0:i=r.next(),o.label=1;case 1:return i.value?[4,i.value(t)]:[3,3];case 2:return o.sent(),i=r.next(),[3,1];case 3:return[2]}}))}))},Container.prototype._getContainerModuleHelpersFactory=function(){var t=this,setModuleId=function(t,r){t._binding.moduleId=r},getRebindFunction=function(r){return function(i){var o=t.rebind(i);return setModuleId(o,r),o}},getOnActivationFunction=function(r){return function(i,o){t._moduleActivationStore.addActivation(r,i,o),t.onActivation(i,o)}},getOnDeactivationFunction=function(r){return function(i,o){t._moduleActivationStore.addDeactivation(r,i,o),t.onDeactivation(i,o)}};return function(r){return{bindFunction:(i=r,function(r){var o=t.bind(r);return setModuleId(o,i),o}),isboundFunction:function(r){return t.isBound(r)},onActivationFunction:getOnActivationFunction(r),onDeactivationFunction:getOnDeactivationFunction(r),rebindFunction:getRebindFunction(r),unbindFunction:function(r){return t.unbind(r)},unbindAsyncFunction:function(r){return t.unbindAsync(r)}};var i}},Container.prototype._getAll=function(t){return Promise.all(this._get(t))},Container.prototype._get=function(t){var r=container_assign(container_assign({},t),{contextInterceptor:function(t){return t},targetType:a.Variable});if(this._middleware){var i=this._middleware(r);if(null==i)throw new Error("Invalid return type in middleware. Middleware must return!");return i}return this._planAndResolve()(r)},Container.prototype._getButThrowIfAsync=function(t){var r=this._get(t);if(isPromiseOrContainsPromise(r))throw new Error("You are attempting to construct '"+t.serviceIdentifier+"' in a synchronous way\n but it has asynchronous dependencies.");return r},Container.prototype._getAllArgs=function(t){return{avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t}},Container.prototype._getNotAllArgs=function(t,r,i,o){return{avoidConstraints:!1,isMultiInject:r,serviceIdentifier:t,key:i,value:o}},Container.prototype._planAndResolve=function(){var t=this;return function(r){var i=plan(t._metadataReader,t,r.isMultiInject,r.targetType,r.serviceIdentifier,r.key,r.value,r.avoidConstraints);return function resolve(t){return _resolveRequest(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}(i=r.contextInterceptor(i))}},Container.prototype._deactivateIfSingleton=function(t){var r=this;if(t.activated)return isPromise(t.cache)?t.cache.then((function(i){return r._deactivate(t,i)})):this._deactivate(t,t.cache)},Container.prototype._deactivateSingletons=function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(isPromise(this._deactivateIfSingleton(o)))throw new Error("Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)")}},Container.prototype._deactivateSingletonsAsync=function(t){return container_awaiter(this,void 0,void 0,(function(){var r=this;return container_generator(this,(function(i){switch(i.label){case 0:return[4,Promise.all(t.map((function(t){return r._deactivateIfSingleton(t)})))];case 1:return i.sent(),[2]}}))}))},Container.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(t,r,i){return this.parent?this._deactivate.bind(this.parent)(t,r):this._bindingDeactivationAndPreDestroy(t,r,i)},Container.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(t,r,i){return container_awaiter(this,void 0,void 0,(function(){return container_generator(this,(function(o){switch(o.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(t,r)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(t,r,i)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},Container.prototype._removeServiceFromDictionary=function(t){try{this._bindingDictionary.remove(t)}catch(r){throw new Error("Could not unbind serviceIdentifier: "+getServiceIdentifierAsString(t))}},Container.prototype._bindingDeactivationAndPreDestroy=function(t,r,i){var o=this;if("function"==typeof t.onDeactivation){var a=t.onDeactivation(r);if(isPromise(a))return a.then((function(){return o._preDestroy(i,r)}))}return this._preDestroy(i,r)},Container.prototype._bindingDeactivationAndPreDestroyAsync=function(t,r,i){return container_awaiter(this,void 0,void 0,(function(){return container_generator(this,(function(o){switch(o.label){case 0:return"function"!=typeof t.onDeactivation?[3,2]:[4,t.onDeactivation(r)];case 1:o.sent(),o.label=2;case 2:return[4,this._preDestroy(i,r)];case 3:return o.sent(),[2]}}))}))},Container}();function injectable(){return function(t){if(Reflect.hasOwnMetadata(I,t))throw new Error("Cannot apply @injectable decorator multiple times.");var r=Reflect.getMetadata("design:paramtypes",t)||[];return Reflect.defineMetadata(I,r,t),t}}function tagParameter(t,r,i,o){!function _throwIfMethodParameter(t){if(void 0!==t)throw new Error(b)}(r),_tagParameterOrProperty(O,t,i.toString(),o)}function _ensureNoMetadataKeyDuplicates(t){var r=[];if(Array.isArray(t)){var i=function getFirstArrayDuplicate(t){for(var r=new Set,i=0,o=t;i<o.length;i++){var a=o[i];if(r.has(a))return a;r.add(a)}}((r=t).map((function(t){return t.key})));if(void 0!==i)throw new Error(l+" "+i.toString())}else r=[t];return r}function _tagParameterOrProperty(t,r,i,o){var a=_ensureNoMetadataKeyDuplicates(o),u={};Reflect.hasOwnMetadata(t,r)&&(u=Reflect.getMetadata(t,r));var c=u[i];if(void 0===c)c=[];else for(var _loop_1=function(t){if(a.some((function(r){return r.key===t.key})))throw new Error(l+" "+t.key.toString())},d=0,h=c;d<h.length;d++){_loop_1(h[d])}c.push.apply(c,a),u[i]=c,Reflect.defineMetadata(t,u,r)}function createTaggedDecorator(t){return function(r,i,o){"number"==typeof o?tagParameter(r,i,o,t):function tagProperty(t,r,i){if(function targetIsConstructorFunction(t){return void 0!==t.prototype}(t))throw new Error(b);_tagParameterOrProperty(j,t.constructor,r,i)}(r,i,t)}}var te=function injectBase(t){return function(r){return function(i,o,a){if(void 0===r){var u="function"==typeof i?i.name:i.constructor.name;throw new Error("@inject called with undefined this could mean that the class "+u+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation.")}return createTaggedDecorator(new B(t,r))(i,o,a)}}}(C);const ne={Surgical:Symbol("Surgical"),Matrix:Symbol("MatrixBackend"),User:Symbol("UserManager"),Storage:Symbol("StorageManager"),Settings:Symbol("SettingsManager"),Socketeer:Symbol("Socketeer"),Turnstile:Symbol("Turnstile")};var re,ie,oe,ae,se,ue;function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,l=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){l=!0,u=t},f:function f(){try{c||null==i.return||i.return()}finally{if(l)throw u}}}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,_toPropertyKey(o.key),o)}}function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var r=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,r||"default");if("object"!==_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===_typeof(r)?r:String(r)}var ce=(re=injectable(),ie=te(ne.Matrix),oe=Reflect.metadata("design:type","undefined"==typeof MatrixBackend?Object:MatrixBackend),re((se=function(){function SurgicalEngine(){_classCallCheck(this,SurgicalEngine),function _initializerDefineProperty(t,r,i,o){i&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}(this,"backend",ue,this)}return _createClass(SurgicalEngine,[{key:"newQuery",value:function newQuery(t){return new le(t,this)}},{key:"newObject",value:function newObject(t){var r,i,o;this.changeset.create.objects[t.id]={position:t.position,type:t.type,sheetId:null!==(r=t.sheetId)&&void 0!==r?r:void 0},this.changeset.update.objects[t.id]={attributes:null!==(i=t.attributes)&&void 0!==i?i:{},isDefinitive:null!==(o=t.isDefinitive)&&void 0!==o&&o},this.autoCommit&&this.commit()}},{key:"newAttribute",value:function newAttribute(t){this.changeset.create.attributes[t.id]={position:t.position,type:t.type,sheetId:t.sheetId},this.autoCommit&&this.commit()}},{key:"updateObject",value:function updateObject(t){var r,i;this.changeset.update.objects[t.id]={position:t.position,attributes:null!==(r=t.attributes)&&void 0!==r?r:{},isDefinitive:null!==(i=t.isDefinitive)&&void 0!==i&&i},this.autoCommit&&this.commit()}},{key:"updateAttribute",value:function updateAttribute(t){this.changeset.update.attributes[t.id]={position:t.position},this.autoCommit&&this.commit()}},{key:"deleteObject",value:function deleteObject(t){this.changeset.delete.objects[t.id]={type:t.type},this.autoCommit&&this.commit()}},{key:"deleteAttribute",value:function deleteAttribute(t){this.changeset.delete.attributes[t.id]={type:t.type},this.autoCommit&&this.commit()}},{key:"commit",value:function commit(){this.autoCommit?Object.keys(this.changeset.create).length||Object.keys(this.changeset.update).length||Object.keys(this.changeset.delete).length?(this.backend.applyChangeset(this.changeset),this.changeset={create:{},update:{},delete:{}}):console.info("No changes to commit."):this.backend.applyChangeset(this.changeset)}},{key:"getAllObjectsForSheet",value:function getAllObjectsForSheet(t){return this.backend.getObjectsFromSheet(t)}},{key:"getObject",value:function getObject(t){return this.backend.getObject(t)}},{key:"getObjects",value:function getObjects(){var t;return(t=this.backend).getObjects.apply(t,arguments)}},{key:"firstRun",value:function firstRun(){this.backend.initializeEngine(this.backend.spreadsheet)}},{key:"initializeSheet",value:function initializeSheet(t){this.backend.initializeSheet(t)}},{key:"loadTemplate",value:function loadTemplate(t){this.backend.loadTemplate(t)}},{key:"editCallback",value:function editCallback(t){this.backend.editCallBack&&this.backend.editCallBack(t)}},{key:"changeCallBack",value:function changeCallBack(){}},{key:"getLastModifiedForObject",value:function getLastModifiedForObject(t){return this.backend.getLastModified(t)}},{key:"getChangeQueue",value:function getChangeQueue(){return this.backend.getChangeQueue()}},{key:"setChangeQueue",value:function setChangeQueue(t){this.backend.setChangeQueue(t)}},{key:"getSheetForObject",value:function getSheetForObject(t){return this.backend.getSheetForObject(t)}},{key:"getSheetForAttribute",value:function getSheetForAttribute(t){return this.backend.getSheetForAttribute(t)}},{key:"getSheetById",value:function getSheetById(t){return this.backend.spreadsheet.getSheets().find((function(r){return r.getSheetId().toString()===t}))}}]),SurgicalEngine}(),ue=function _applyDecoratedDescriptor(t,r,i,o,a){var u={};return Object.keys(o).forEach((function(t){u[t]=o[t]})),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=i.slice().reverse().reduce((function(i,o){return o(t,r,i)||i}),u),a&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(t,r,u),u=null),u}(se.prototype,"backend",[ie,oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=se))||ae),le=function(){function QueryGenerator(t,r){_classCallCheck(this,QueryGenerator),function _defineProperty(t,r,i){return(r=_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}(this,"query",[]),this.source=t,this.groups=[],this.engine=r}return _createClass(QueryGenerator,[{key:"addGroup",value:function addGroup(){var t=new fe;return this.groups.push(t),t}},{key:"run",value:function run(){var t,r=_createForOfIteratorHelper(this.groups);try{for(r.s();!(t=r.n()).done;){var i=t.value;this.query.push(i.searchGroup)}}catch(t){r.e(t)}finally{r.f()}return this.groups=[],this.engine.backend.runQuery(this.query,this.source)}}]),QueryGenerator}(),fe=function(){function SearchGroup(){_classCallCheck(this,SearchGroup)}return _createClass(SearchGroup,[{key:"addEqualsSearch",value:function addEqualsSearch(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.searchGroup.push({attribute:t,match:{type:"equals",value:r,polarity:i}})}},{key:"addContainsSearch",value:function addContainsSearch(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.searchGroup.push({attribute:t,match:{type:"contains",value:r,polarity:i}})}},{key:"addIsContainedSearch",value:function addIsContainedSearch(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.searchGroup.push({attribute:t,match:{type:"iscontained",value:r,polarity:i}})}},{key:"addBetweenSearch",value:function addBetweenSearch(t,r){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.searchGroup.push({attribute:t,match:{type:"between",values:r,polarity:i}})}},{key:"addFilledSearch",value:function addFilledSearch(t,r){this.searchGroup.push({attribute:t,match:{type:"filled",value:r}})}}]),SearchGroup}(),de=__webpack_require__(6765),he=__webpack_require__.n(de),pe=__webpack_require__(7226),ge=__webpack_require__.n(pe),ye=function(t){return t.horizontalObjects="horizontal-objects",t.verticalObjects="vertical-objects",t.headerRows="header-rows",t.headerColumns="header-columns",t.multisheet="multisheet",t.sideBySide="side-by-side",t}({});const ve={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let me;const be=new Uint8Array(16);function rng(){if(!me&&(me="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!me))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return me(be)}const _e=[];for(let t=0;t<256;++t)_e.push((t+256).toString(16).slice(1));function unsafeStringify(t,r=0){return _e[t[r+0]]+_e[t[r+1]]+_e[t[r+2]]+_e[t[r+3]]+"-"+_e[t[r+4]]+_e[t[r+5]]+"-"+_e[t[r+6]]+_e[t[r+7]]+"-"+_e[t[r+8]]+_e[t[r+9]]+"-"+_e[t[r+10]]+_e[t[r+11]]+_e[t[r+12]]+_e[t[r+13]]+_e[t[r+14]]+_e[t[r+15]]}const we=function v4(t,r,i){if(ve.randomUUID&&!r&&!t)return ve.randomUUID();const o=(t=t||{}).random||(t.rng||rng)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){i=i||0;for(let t=0;t<16;++t)r[i+t]=o[t];return r}return unsafeStringify(o)};var Se,ke,Ae,Ce,xe,Oe,je,Ie,Te,Pe;function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return matrix_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||matrix_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function _regeneratorRuntime(){return r};var t,r={},i=Object.prototype,o=i.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",d=u.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var u=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(u.prototype),l=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,l)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}r.wrap=wrap;var h="suspendedStart",p="executing",g="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var v={};define(v,c,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(values([])));b&&b!==i&&o.call(b,c)&&(v=b);var _=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(v);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,a,u,c){var l=tryCatch(t[i],t,a);if("throw"!==l.type){var d=l.arg,h=d.value;return h&&"object"==matrix_typeof(h)&&o.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,c)}),(function(t){invoke("throw",t,u,c)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,c)}))}c(l.arg)}var i;a(this,"_invoke",{value:function value(t,o){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,o,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(r,i,o){var a=h;return function(u,c){if(a===p)throw new Error("Generator is already running");if(a===g){if("throw"===u)throw c;return{value:t,done:!0}}for(o.method=u,o.arg=c;;){var l=o.delegate;if(l){var d=maybeInvokeDelegate(l,o);if(d){if(d===y)continue;return d}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===h)throw a=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=p;var v=tryCatch(r,i,o);if("normal"===v.type){if(a=o.done?g:"suspendedYield",v.arg===y)continue;return{value:v.arg,done:o.done}}"throw"===v.type&&(a=g,o.method="throw",o.arg=v.arg)}}}function maybeInvokeDelegate(r,i){var o=i.method,a=r.iterator[o];if(a===t)return i.delegate=null,"throw"===o&&r.iterator.return&&(i.method="return",i.arg=t,maybeInvokeDelegate(r,i),"throw"===i.method)||"return"!==o&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y;var u=tryCatch(a,r.iterator,i.arg);if("throw"===u.type)return i.method="throw",i.arg=u.arg,i.delegate=null,y;var c=u.arg;return c?c.done?(i[r.resultName]=c.value,i.next=r.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,y):c:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(r){if(r||""===r){var i=r[c];if(i)return i.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,u=function next(){for(;++a<r.length;)if(o.call(r,a))return next.value=r[a],next.done=!1,next;return next.value=t,next.done=!0,next};return u.next=u}}throw new TypeError(matrix_typeof(r)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(_,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,d,"GeneratorFunction")),t.prototype=Object.create(_),t},r.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),r.AsyncIterator=AsyncIterator,r.async=function(t,i,o,a,u){void 0===u&&(u=Promise);var c=new AsyncIterator(wrap(t,i,o,a),u);return r.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(_),define(_,d,"Generator"),define(_,c,(function(){return this})),define(_,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),i=[];for(var o in r)i.push(o);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},r.values=values,Context.prototype={constructor:Context,reset:function reset(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!r)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(r){if(this.done)throw r;var i=this;function handle(o,a){return c.type="throw",c.arg=r,i.next=o,a&&(i.method="next",i.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],c=u.completion;if("root"===u.tryLoc)return handle("end");if(u.tryLoc<=this.prev){var l=o.call(u,"catchLoc"),d=o.call(u,"finallyLoc");if(l&&d){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0);if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var u=a;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var c=u?u.completion:{};return c.type=t,c.arg=r,u?(this.method="next",this.next=u.finallyLoc,y):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),y}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var a=o.arg;resetTryEntry(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(r,i,o){return this.delegate={iterator:values(r),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=t),y}},r}function matrix_createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=matrix_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,l=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){l=!0,u=t},f:function f(){try{c||null==i.return||i.return()}finally{if(l)throw u}}}}function matrix_unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return matrix_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?matrix_arrayLikeToArray(t,r):void 0}}function matrix_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function matrix_initializerDefineProperty(t,r,i,o){i&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}function matrix_applyDecoratedDescriptor(t,r,i,o,a){var u={};return Object.keys(o).forEach((function(t){u[t]=o[t]})),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=i.slice().reverse().reduce((function(i,o){return o(t,r,i)||i}),u),a&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(t,r,u),u=null),u}function matrix_typeof(t){return matrix_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},matrix_typeof(t)}function _createSuper(t){var r=_isNativeReflectConstruct();return function(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===matrix_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function _wrapNativeSuper(t){var r="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(t){if(null===t||!function _isNativeFunction(t){return-1!==Function.toString.call(t).indexOf("[native code]")}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(t))return r.get(t);r.set(t,Wrapper)}function Wrapper(){return _construct(t,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(t.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,t)},_wrapNativeSuper(t)}function _construct(){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function _construct(t,r,i){var o=[null];o.push.apply(o,r);var a=new(Function.bind.apply(t,o));return i&&_setPrototypeOf(a,i.prototype),a}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function matrix_defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,matrix_toPropertyKey(o.key),o)}}function matrix_createClass(t,r,i){return r&&matrix_defineProperties(t.prototype,r),i&&matrix_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function matrix_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function matrix_defineProperty(t,r,i){return(r=matrix_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function matrix_toPropertyKey(t){var r=function matrix_toPrimitive(t,r){if("object"!==matrix_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,r||"default");if("object"!==matrix_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===matrix_typeof(r)?r:String(r)}var Me=matrix_createClass((function Names(){matrix_classCallCheck(this,Names)}));Se=Me,matrix_defineProperty(Me,"universal","SURGICAL_ENGINE_MATRIX_"),matrix_defineProperty(Me,"object",Se.universal+"OBJECT_"),matrix_defineProperty(Me,"attribute",Se.universal+"ATTRIBUTE_"),matrix_defineProperty(Me,"layout",Se.universal+"LAYOUT"),matrix_defineProperty(Me,"ignore",Se.universal+"IGNORE_"),matrix_defineProperty(Me,"header",Se.ignore+"HEADER_"),matrix_defineProperty(Me,"generalIgnore",Se.ignore+"GENERAL_"),matrix_defineProperty(Me,"changeTracking","change-tracking"),matrix_defineProperty(Me,"changeTrackingLookup",Se.changeTracking+"-lookup"),matrix_defineProperty(Me,"changeTrackingQueue",Se.changeTracking+"-queue");var Re,Ee,Ne,Be,De,Fe,Le,Ue,We=(ke=injectable(),Ae=te(ne.Storage),Ce=Reflect.metadata("design:type","undefined"==typeof StorageManager?Object:StorageManager),xe=te(ne.Turnstile),Oe=Reflect.metadata("design:type",Function),ke((Ie=function(){function MatrixBackend(){matrix_classCallCheck(this,MatrixBackend),matrix_initializerDefineProperty(this,"StorageManager",Te,this),matrix_initializerDefineProperty(this,"turnstile",Pe,this),matrix_defineProperty(this,"supportedLayouts",[ye.headerRows,ye.headerColumns,ye.horizontalObjects,ye.verticalObjects])}return matrix_createClass(MatrixBackend,[{key:"init",value:function init(t){this.spreadsheet=t}},{key:"initializeEngine",value:function initializeEngine(){return this.StorageManager.document.store(Me.changeTrackingLookup,{0:{0:0}}),this}},{key:"initializeSheet",value:function initializeSheet(){return this}},{key:"loadTemplate",value:function loadTemplate(t){for(var r in t.objects){var i=this.spreadsheet.getRange(t.objects[r]);this.spreadsheet.setNamedRange(Me.object+r,i)}for(var o in t.attributes){var a=this.spreadsheet.getRange(t.objects[o]);this.spreadsheet.setNamedRange(Me.attribute+o,a)}for(var u in Object.keys(t.sheetLayouts)){this.getSheetById(u).addDeveloperMetadata(Me.layout,t.sheetLayouts[u])}for(var c in t.ignoredAreas.headers){var l=we(),d=this.spreadsheet.getRange(c);this.spreadsheet.setNamedRange(Me.header+l,d)}for(var h in t.ignoredAreas.generalAreas){var p=we(),g=this.spreadsheet.getRange(h);this.spreadsheet.setNamedRange(Me.generalIgnore+p,g)}return this}},{key:"getSheetById",value:function getSheetById(t){return this.spreadsheet.getSheets().find((function(r){return r.getSheetId().toString()===t}))}},{key:"getObject",value:function getObject(t){var r=this.spreadsheet.getRangeByName(Me.object+t),i=r.getSheet(),o=[];for(var a in i.getNamedRanges())a.startsWith(Me.attribute)&&o.push(a);var u={},c=this.getLastModified(t);for(var l in o){var d=this.spreadsheet.getRangeByName(o[l]);u[l]=this.intersectRanges(d,r)}return{attributes:u,lastModified:c,id:t}}},{key:"getObjects",value:function getObjects(){for(var t=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.map((function(r){return t.getObject(r)}))}},{key:"applyChangeset",value:function applyChangeset(t){var r=this;for(var i in t.create.attributes){var o=t.create.attributes[i];if(o.position.range)this.ingestNewRangeByNotation(o.position.range,"ATTRIBUTE",i);else if(void 0!==o.sheetId){var a=this.getSheetById(o.sheetId);switch(o.type){case"ingest":this.ingestNewRangeByOffset(a,"ATTRIBUTE",o.position.offset,i);break;case"append":this.appendAttribute(a,i);case"hidden":this.appendAttribute(a,i),this.hideData(i,"attribute")}}}for(var u in SpreadsheetApp.flush(),t.create.objects){var c=t.create.objects[u];if(void 0!==c.sheetId){var l=this.getSheetById(c.sheetId);switch(c.type){case"append":this.appendObject(l,u);break;case"ingest":c.position.range?this.ingestNewRangeByNotation(c.position.range,"OBJECT",u):c.position.offset&&this.ingestNewRangeByOffset(l,"OBJECT",c.position.offset,u)}}}for(var d in SpreadsheetApp.flush(),t.update.attributes){var h=t.update.attributes[d];this.moveDataByOffset(d,"attribute",h.position.offset)}for(var p in SpreadsheetApp.flush(),t.update.attributes){var g=t.update.objects[p],y=this.spreadsheet.getRangeByName(Me.object+p);if(g.position.offset&&this.moveDataByOffset(p,"object",g.position.offset),g.isDefinitive){var v=y.getSheet().getNamedRanges().filter((function(t){t.getName().startsWith(Me.attribute)}));for(var m in v){this.intersectRanges(y,v[m].getRange()).setValue("")}}for(var b in g.attributes){var _=this.intersectRanges(y,this.spreadsheet.getRangeByName(Me.attribute+b)),w=g.attributes[b];_.setValue(w)}}SpreadsheetApp.flush();var S=function _loop(i){switch(t.delete.attributes[i].type){case"splice":r.deleteData(i,"attribute");break;case"ignore":var o=r.spreadsheet.getRangeByName(Me.attribute+i);r.spreadsheet.setNamedRange(Me.ignore+i,o),o.getSheet().getNamedRanges().find((function(t){return t.getName()===Me.attribute+i})).remove();break;case"hide":r.hideData(i,"attribute")}};for(var k in t.delete.attributes)S(k);SpreadsheetApp.flush();var A=function _loop2(i){switch(t.delete.objects[i].type){case"splice":r.deleteData(i,"object");break;case"ignore":var o=r.spreadsheet.getRangeByName(Me.object+i);r.spreadsheet.setNamedRange(Me.generalIgnore+i,o),o.getSheet().getNamedRanges().find((function(t){return t.getName()===Me.object+i})).remove();break;case"hide":r.hideData(i,"object")}};for(var C in t.delete.objects)A(C);return SpreadsheetApp.flush(),this}},{key:"runQuery",value:function runQuery(t,r){var i,o=[],a=matrix_createForOfIteratorHelper(r instanceof Array?r:this.getObjectsFromSheet(r));try{for(a.s();!(i=a.n()).done;){var u,c=i.value,l=[],d=matrix_createForOfIteratorHelper(t);try{for(d.s();!(u=d.n()).done;){var h,p=u.value,g=[],y=matrix_createForOfIteratorHelper(p);try{for(y.s();!(h=y.n()).done;){var v=h.value,m=c.attributes[v.attribute];switch(v.match.type){case"equals":g.push(v.match.polarity?m===v.match.value:m!==v.match.value);break;case"contains":if("string"!=typeof m)throw new Ge("Attempted to use a contain search on an attribute that is not a string");if("string"!=typeof v.match.value)throw new Ge("Attempted to search a value using a contain search that is not a string");g.push(v.match.polarity?m.toString().includes(v.match.value):!m.toString().includes(v.match.value));break;case"iscontained":if("string"!=typeof m)throw new Ge("Attempted to use an iscontained search on an attribute that is not a string");if("string"!=typeof v.match.value)throw new Ge("Attempted to search a value using an iscontained search that is not a string");g.push(v.match.polarity?v.match.value.toString().includes(m):!v.match.value.toString().includes(m));break;case"between":if("number"!=typeof m)throw new Ge("Attempted to use a between search on an attribute that is not a number");var b=m>=v.match.values[0]&&m<=v.match.values[1]||m<=v.match.values[0]&&m>=v.match.values[1];g.push(v.match.polarity?b:!b);break;case"filled":g.push(v.match.value?""!==m:""===m)}}}catch(t){y.e(t)}finally{y.f()}g.every((function(t){return!0===t}))?l.push(!0):l.push(!1)}}catch(t){d.e(t)}finally{d.f()}l.some((function(t){return!0===t}))&&o.push(c)}}catch(t){a.e(t)}finally{a.f()}return o}},{key:"appendAttribute",value:function appendAttribute(t,r){var i=this.findEmptySpace(t,"after-content-end","attribute");return this.spreadsheet.setNamedRange(Me.attribute+r,i),t.getNamedRanges().find((function(t){return t.getName()===Me.attribute+r}))}},{key:"appendObject",value:function appendObject(t,r){var i=this.findEmptySpace(t,"after-content-end","object");return this.spreadsheet.setNamedRange(Me.object+r,i),t.getNamedRanges().find((function(t){return t.getName()===Me.object+r}))}},{key:"ingestNewRangeByNotation",value:function ingestNewRangeByNotation(t,r,i){var o=this.spreadsheet.getRange(t);this.spreadsheet.setNamedRange(("ATTRIBUTE"===r?Me.attribute:Me.object)+i,o)}},{key:"ingestNewRangeByOffset",value:function ingestNewRangeByOffset(t,r,i,o){switch(this.getSheetLayout(t)){case"vertical":var a=this.spreadsheet.getLastColumn()+i+1;this.spreadsheet.setNamedRange(("ATTRIBUTE"===r?Me.attribute:Me.object)+o,t.getRange(a,1,1,t.getLastColumn()));break;case"horizontal":var u=this.spreadsheet.getLastRow()+i+1;this.spreadsheet.setNamedRange(("ATTRIBUTE"===r?Me.attribute:Me.object)+o,t.getRange(1,u,t.getLastRow(),1))}}},{key:"intersectRanges",value:function intersectRanges(t,r){var i=t.getSheet(),o=Math.max(t.getRow(),r.getRow()),a=Math.max(t.getColumn(),r.getColumn());return i.getRange(o,a)}},{key:"moveDataByOffset",value:function moveDataByOffset(t,r,i){var o=this.spreadsheet.getRangeByName(("attribute"===r?Me.attribute:Me.object)+t),a=o.getSheet(),u=this.getSheetLayout(a);switch(!0){case"attribute"===r&&"vertical"===u||"object"===r&&"horizontal"===u:o.offset(0,i);break;case"attribute"===r&&"horizontal"===u||"object"===r&&"vertical"===u:o.offset(i,0)}}},{key:"hideData",value:function hideData(t,r){var i=this.spreadsheet.getRangeByName(("attribute"===r?Me.attribute:Me.object)+t),o=this.getSheetLayout(i.getSheet());switch(!0){case"vertical"===o&&"object"===r||"horizontal"===o&&"attribute"===r:this.spreadsheet.hideColumn(i);break;case"vertical"===o&&"attribute"===r||"horizontal"===o&&"object"===r:this.spreadsheet.hideRow(i)}}},{key:"deleteData",value:function deleteData(t,r){var i=this.spreadsheet.getRangeByName(("attribute"===r?Me.attribute:Me.object)+t),o=this.getSheetLayout(i.getSheet());switch(!0){case"vertical"===o&&"object"===r||"horizontal"===o&&"attribute"===r:i.getSheet().deleteColumn(i.getColumn());break;case"vertical"===o&&"attribute"===r||"horizontal"===o&&"object"===r:i.getSheet().deleteRow(i.getRow())}}},{key:"getSheetLayout",value:function getSheetLayout(t){var r=t.getDeveloperMetadata().find((function(t){return t.getKey()===Me.layout})).getValue();if("vertical"!==r&&"horizontal"!==r)throw new Ge("Invalid layout");return r}},{key:"getObjectsFromSheet",value:function getObjectsFromSheet(t){var r=t.getNamedRanges().filter((function(t){return t.getName().startsWith(Me.attribute)})),i=t.getNamedRanges().filter((function(t){return t.getName().startsWith(Me.object)})),o=(t.getNamedRanges().filter((function(t){return t.getName().startsWith(Me.ignore)})),[]),a=[],u={},c={};switch(this.getSheetLayout(t)){case"horizontal":a=t.getDataRange().getValues();var l,d=matrix_createForOfIteratorHelper(i);try{for(d.s();!(l=d.n()).done;){var h=l.value;u[h.getName().split(Me.object)[1]]=h.getRange().getRow()-1}}catch(t){d.e(t)}finally{d.f()}var p,g=matrix_createForOfIteratorHelper(r);try{for(g.s();!(p=g.n()).done;){var y=p.value;c[y.getName().split(Me.attribute)[1]]=y.getRange().getColumn()-1}}catch(t){g.e(t)}finally{g.f()}break;case"vertical":a=ge()(t.getDataRange().getValues());var v,m=matrix_createForOfIteratorHelper(i);try{for(m.s();!(v=m.n()).done;){var b=v.value;u[b.getName().split(Me.object)[1]]=b.getRange().getColumn()-1}}catch(t){m.e(t)}finally{m.f()}var _,w=matrix_createForOfIteratorHelper(r);try{for(w.s();!(_=w.n()).done;){var S=_.value;c[S.getName().split(Me.attribute)[1]]=S.getRange().getRow()-1}}catch(t){w.e(t)}finally{w.f()}}for(var k in u){var A={};for(var C in c)A[C]=a[u[k]][c[C]];o.push({id:k,attributes:A,lastModified:this.getLastModified(k)})}return o}},{key:"findEmptySpace",value:function findEmptySpace(t,r,i){var o=this.getSheetLayout(t);switch(!0){case"vertical"===o&&"object"===i||"horizontal"===o&&"attribute"===i:switch(r){case"first-available":for(var a=1;a<t.getLastColumn();a++){var u=t.getRange(1,a,t.getLastRow(),1);if(this.isRangeEmpty(u))return u}case"after-content-end":return t.getRange(1,t.getLastColumn()+1,t.getLastRow(),1)||t.insertColumnAfter(t.getLastColumn()),t.getRange(1,t.getLastColumn()+1,t.getLastRow(),1)}case"vertical"===o&&"attribute"===i||"horizontal"===o&&"object"===i:switch(r){case"first-available":for(var c=1;c<t.getLastRow();c++){var l=t.getRange(c,1,1,t.getLastColumn());if(this.isRangeEmpty(l))return l}case"after-content-end":return t.getRange(t.getLastRow()+1,1,1,t.getLastColumn())||t.insertRowAfter(t.getLastColumn()),t.getRange(t.getLastRow()+1,1,1,t.getLastColumn())}}}},{key:"getSheetForAttribute",value:function getSheetForAttribute(t){return this.spreadsheet.getRangeByName(Me.attribute+t).getSheet()}},{key:"getSheetForObject",value:function getSheetForObject(t){return this.spreadsheet.getRangeByName(Me.object+t).getSheet()}},{key:"isRangeEmpty",value:function isRangeEmpty(t){var r=t.getSheet();if(!this.isRangeIgnored(r,t)){var i,o=matrix_createForOfIteratorHelper(this.getIterableRange(t));try{for(o.s();!(i=o.n()).done;){var a=i.value;if(!this.isRangeIgnored(r,a)&&a.getValue())return!1}}catch(t){o.e(t)}finally{o.f()}return!0}}},{key:"getIterableRange",value:_regeneratorRuntime().mark((function getIterableRange(t){var r,i,o,a;return _regeneratorRuntime().wrap((function getIterableRange$(u){for(;;)switch(u.prev=u.next){case 0:u.t0=!0,u.next=u.t0===(1===t.getHeight()&&t.getWidth()>1)?3:u.t0===(t.getHeight()>1&&1===t.getWidth())?11:u.t0===(1===t.getHeight()&&1===t.getWidth())?19:u.t0===(t.getHeight()>1&&t.getWidth()>1)?22:34;break;case 3:r=1;case 4:if(!(r<t.getWidth())){u.next=10;break}return u.next=7,t.getCell(1,r);case 7:r++,u.next=4;break;case 10:return u.abrupt("break",35);case 11:i=1;case 12:if(!(i<t.getHeight())){u.next=18;break}return u.next=15,t.getCell(i,1);case 15:i++,u.next=12;break;case 18:return u.abrupt("break",35);case 19:return u.next=21,t.getCell(1,1);case 21:return u.abrupt("break",35);case 22:o=1;case 23:if(!(o<t.getHeight())){u.next=34;break}a=1;case 25:if(!(a<t.getWidth())){u.next=31;break}return u.next=28,t.getCell(o,a);case 28:a++,u.next=25;break;case 31:o++,u.next=23;break;case 34:throw new Ge("The input range used for iteration is an in incorrect format. Please use a one-dimensional range, conforming to the TypeScript type GoogleAppsScript.Spreadsheet.Range.");case 35:case"end":return u.stop()}}),getIterableRange)}))},{key:"isRangeIgnored",value:function isRangeIgnored(t,r){var i=this;return t.getNamedRanges().filter((function(t){t.getName().startsWith(Me.ignore)})).forEach((function(t){if(i.isRangeContainedIn(r,t.getRange()))return!0})),!1}},{key:"isRangeContainedIn",value:function isRangeContainedIn(t,r){if(t.getA1Notation()===r.getA1Notation()&&t.getSheet().getName()===r.getSheet().getName())return!0;var i=t.getRow(),o=t.getColumn(),a=i+t.getHeight()-1,u=o+t.getWidth()-1,c=r.getRow(),l=r.getColumn(),d=c+r.getHeight()-1,h=l+r.getWidth()-1;return i>=c&&a<=d&&o>=l&&u<=h}},{key:"doRangesIntersect",value:function doRangesIntersect(t,r){var i=t.getRow(),o=i+t.getNumRows()-1,a=t.getColumn(),u=a+t.getNumColumns()-1,c=r.getRow(),l=c+r.getNumRows()-1,d=r.getColumn(),h=d+r.getNumColumns()-1;return i<=l&&c<=o&&a<=h&&d<=u}},{key:"commitLastModified",value:function commitLastModified(t,r){var i=new this.turnstile(Me.changeTrackingLookup,"document");if(i.enter(1e3,!0)){var o=this.StorageManager.document.getStored(Me.changeTracking),a=this.StorageManager.document.getStored(Me.changeTrackingQueue),u=(new Date).getTime();for(var c in r){var l=r[c].object,d=r[c].attribute;he()(o,[l,d],u),a.push({object:l,attribute:d,date:u})}this.StorageManager.document.store(Me.changeTrackingLookup,o),this.StorageManager.document.store(Me.changeTrackingQueue,a),i.exit()}}},{key:"getLastModified",value:function getLastModified(t){var r,i=this.StorageManager.document.getStored(Me.changeTrackingLookup);if(t)return null!==(r=i[t])&&void 0!==r?r:void 0}},{key:"getChangeQueue",value:function getChangeQueue(){return this.StorageManager.document.getStored(Me.changeTrackingQueue)}},{key:"setChangeQueue",value:function setChangeQueue(t){this.StorageManager.document.store(Me.changeTrackingQueue,t)}},{key:"editCallBack",value:function editCallBack(t){var r=this,i=_toConsumableArray(this.getIterableRange(t.range)),o=t.range.getSheet(),a=o.getNamedRanges().filter((function(t){return!t.getName().startsWith(Me.ignore)&&!!t.getName().startsWith(Me.object)})),u=o.getNamedRanges().filter((function(t){return!t.getName().startsWith(Me.ignore)&&!!t.getName().startsWith(Me.attribute)})),c=i.map((function(t){var i=u.find((function(i){return r.isRangeContainedIn(t,i.getRange())})),o=a.find((function(i){return r.isRangeContainedIn(t,i.getRange())}));return{attribute:i.getName().split(Me.attribute)[0],object:o.getName().split(Me.object)[0]}}));this.commitLastModified(o,c)}}]),MatrixBackend}(),Te=matrix_applyDecoratedDescriptor(Ie.prototype,"StorageManager",[Ae,Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=matrix_applyDecoratedDescriptor(Ie.prototype,"turnstile",[xe,Oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je=Ie))||je),Ge=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(MatrixError,t);var r=_createSuper(MatrixError);function MatrixError(t){var i;return matrix_classCallCheck(this,MatrixError),(i=r.call(this,t)).name="MatrixError",i}return matrix_createClass(MatrixError)}(_wrapNativeSuper(Error)),qe=__webpack_require__(8537),ze=__webpack_require__.n(qe),Ve=__webpack_require__(5877),Ke=__webpack_require__.n(Ve),He=__webpack_require__(9786);function storage_manager_typeof(t){return storage_manager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},storage_manager_typeof(t)}function storage_manager_defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,storage_manager_toPropertyKey(o.key),o)}}function storage_manager_createClass(t,r,i){return r&&storage_manager_defineProperties(t.prototype,r),i&&storage_manager_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function storage_manager_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function storage_manager_defineProperty(t,r,i){return(r=storage_manager_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function storage_manager_toPropertyKey(t){var r=function storage_manager_toPrimitive(t,r){if("object"!==storage_manager_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,r||"default");if("object"!==storage_manager_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===storage_manager_typeof(r)?r:String(r)}var Qe=storage_manager_createClass((function Names(){storage_manager_classCallCheck(this,Names)}));storage_manager_defineProperty(Qe,"universal","ARTICLEMAN_STORAGE_"),storage_manager_defineProperty(Qe,"legend","_LEGEND");var $e=(Re=injectable(),Ee=Reflect.metadata("design:type",Function),Ne=Reflect.metadata("design:paramtypes",[]),Be=te(ne.Turnstile),De=Reflect.metadata("design:type","undefined"==typeof Turnstile?Object:Turnstile),Re(Fe=Ee(Fe=Ne((Ue=function storage_manager_applyDecoratedDescriptor(t,r,i,o,a){var u={};return Object.keys(o).forEach((function(t){u[t]=o[t]})),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=i.slice().reverse().reduce((function(i,o){return o(t,r,i)||i}),u),a&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(t,r,u),u=null),u}((Le=function(){function StorageManager(){var t=this;storage_manager_classCallCheck(this,StorageManager),function storage_manager_initializerDefineProperty(t,r,i,o){i&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}(this,"turnstile",Ue,this),storage_manager_defineProperty(this,"document",{getStored:function getStored(r){return t.getFromStorage("document",r)},store:function store(r,i){return t.setStorage("document",r,i)},mergeStore:function mergeStore(r,i){return t.document.store(r,ze()(t.document.getStored(r),i))},cache:function cache(r,i){t.setCache("document",r,i)},cacheFast:function cacheFast(r,i){t.setCache("document",r,i,!0)},getCached:function getCached(r){return t.getFromCache("document",r)},getCachedFast:function getCachedFast(r){return t.getFromCache("document",r,!0)},deleteStored:function deleteStored(r){return t.setStorage("document",r,null)}}),storage_manager_defineProperty(this,"script",{getStored:function getStored(r){return t.getFromStorage("script",r)},store:function store(r,i){return t.setStorage("script",r,i)},mergeStore:function mergeStore(r,i){return t.script.store(r,ze()(t.script.getStored(r),i))},cache:function cache(r,i){t.setCache("script",r,i)},cacheFast:function cacheFast(r,i){t.setCache("script",r,i,!0)},getCached:function getCached(r){return t.getFromCache("script",r)},getCachedFast:function getCachedFast(r){return t.getFromCache("script",r,!0)},deleteStored:function deleteStored(r){return t.setStorage("script",r,null)}}),storage_manager_defineProperty(this,"user",{getStored:function getStored(r){return t.getFromStorage("user",r)},store:function store(r,i){return t.setStorage("user",r,i)},mergeStore:function mergeStore(r,i){return t.user.store(r,ze()(t.user.getStored(r),i))},cache:function cache(r,i){t.setCache("user",r,i)},cacheFast:function cacheFast(r,i){t.setCache("user",r,i,!0)},getCached:function getCached(r){return t.getFromCache("user",r)},getCachedFast:function getCachedFast(r){return t.getFromCache("user",r,!0)},deleteStored:function deleteStored(r){return t.setStorage("user",r,null)}}),this.documentStorage=PropertiesService.getDocumentProperties(),this.documentCache=CacheService.getScriptCache(),this.userStorage=PropertiesService.getUserProperties(),this.userCache=CacheService.getUserCache(),this.scriptStorage=PropertiesService.getScriptProperties(),this.scriptCache=CacheService.getScriptCache()}return storage_manager_createClass(StorageManager,[{key:"getFromStorage",value:function getFromStorage(t,r,i){var o=this.getScopedStorage(t),a=o.getProperty(Qe.universal+r+Qe.legend);if(!a)throw new Error("Legend not found for specified key");var u=JSON.parse(a),c=o.getProperties();return this.unFormat(u,r,c,null!=i?i:void 0)}},{key:"unFormat",value:function unFormat(t,r,i,o){if(0===Object.keys(t).length)return null;for(var a=[],u=0;u<t.length;u++)a.push(i[Qe.universal+r+"_"+u]);var c=a.join(""),l=Utilities.computeDigest(Utilities.DigestAlgorithm.MD5,c).map((function(t){return("0"+(255&t).toString(16)).slice(-2)})).join("");if(l===t.digest||"UNSAFELY_ALLOW_BAD_DIGESTS"===o)return"STRING"===t.type?c:t.isCompressed?(0,He.Lj)(JSON.parse(c)):JSON.parse(c);if("UNSAFELY_ALLOW_BAD_DIGESTS"!==o)throw new Error("this data couldn't be retrieved and/or stored losslessly. The digests don't match. Expected ".concat(t.digest,", got ").concat(l,". Use UNSAFELY_ALLOW_BAD_DIGESTS to ignore the digest check."))}},{key:"format",value:function format(t,r){var i,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:9100,c=storage_manager_typeof(r),l=!1;"object"!==c||Array.isArray(r)||null===r||!0!==o?i=JSON.stringify(r):(i=JSON.stringify((0,He.nN)(r)),l=!0);var d={},h="";!0===a&&(h=Utilities.computeDigest(Utilities.DigestAlgorithm.MD5,i,Utilities.Charset.UTF_8).map((function(t){return("0"+(255&t).toString(16)).slice(-2)})).join(""));var p=0;return i.length>u?Ke()(i,{size:u}).forEach((function(r){p++,d[Qe.universal+t+"_"+p]=r})):d[Qe.universal+t]=i,d[Qe.universal+t+Qe.legend]=JSON.stringify({length:p,type:c,isCompressed:l,note:"!!!!    This storage is NOT modifiable! Do not try to directly modify any value here or anywhere else in the Properties service that has the ARTICLEMAN_STORAGE namespace. Articleman compresses, and by extension obfuscates all data stored by this, and checks digests when reading! If you would like to modify this storage, either enter Developer Mode as an admin or recompile the app yourself, importing the 'lib/storage-manager' API when writing code.     !!!!",digest:h}),d}},{key:"getScopedStorage",value:function getScopedStorage(t){switch(t){case"document":return PropertiesService.getDocumentProperties();case"script":return PropertiesService.getScriptProperties();case"user":return PropertiesService.getUserProperties();default:throw new Error("Unknown scope")}}},{key:"getScopedCache",value:function getScopedCache(t){switch(t){case"document":return CacheService.getDocumentCache();case"script":return CacheService.getScriptCache();case"user":return CacheService.getUserCache();default:throw new Error("Unknown scope")}}},{key:"getFromCache",value:function getFromCache(t,r){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.getScopedCache(t),a=JSON.parse(o.get(Qe.universal+r+Qe.legend)),u=[],c=0;c<a.length;c++){var l=Qe.universal+r+"_"+c;u.push(l)}var d=o.getAll(u);return this.unFormat(a,r,d,i?"UNSAFELY_ALLOW_BAD_DIGESTS":void 0)}},{key:"setCache",value:function setCache(t,r,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=this.getScopedCache(t),u=this.format(r,i,!1,!o,1e8);a.putAll(u)}},{key:"setStorage",value:function setStorage(t,r,i){var o=this.turnstile;if(!o.enter(2e4))throw new Error("Unable to use Turnstile on Storage Manager, Articleman seems dangerously busy.");console.timeEnd("StorageManagerTurnstile"),console.log("Went through the turnstile for this");var a=this.getScopedStorage(t),u=this.format(r,i,!0);a.setProperties(u),o.exit()}}]),StorageManager}()).prototype,"turnstile",[Be,De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe=Le))||Fe)||Fe)||Fe),Je=__webpack_require__(5652),Ye=__webpack_require__.n(Je),Ze=__webpack_require__(2349),Xe=__webpack_require__.n(Ze);function user_typeof(t){return user_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},user_typeof(t)}function user_defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,user_toPropertyKey(o.key),o)}}function user_toPropertyKey(t){var r=function user_toPrimitive(t,r){if("object"!==user_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,r||"default");if("object"!==user_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===user_typeof(r)?r:String(r)}var et,tt,nt,rt,it,ot,at,st,ut,ct,lt=function(){function User(t){!function user_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,User),function user_defineProperty(t,r,i){return(r=user_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}(this,"type","user"),this.email=t.email,this.id=t.id,this.termsOfAddress=t.termsOfAddress,this.capabilities=t.capabilities,this.onboarded=t.onboarded,this.attributes=t.attributes,this.groups=t.groups}return function user_createClass(t,r,i){return r&&user_defineProperties(t.prototype,r),i&&user_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(User,[{key:"computedCapabilities",get:function get(){var t=this.groups.flatMap((function(t){return t.capabilities})),r=this.capabilities;return Ye()(t.concat(r))}}]),User}();function user_manager_createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function user_manager_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return user_manager_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return user_manager_arrayLikeToArray(t,r)}(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,l=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){l=!0,u=t},f:function f(){try{c||null==i.return||i.return()}finally{if(l)throw u}}}}function user_manager_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function user_manager_initializerDefineProperty(t,r,i,o){i&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}function user_manager_applyDecoratedDescriptor(t,r,i,o,a){var u={};return Object.keys(o).forEach((function(t){u[t]=o[t]})),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=i.slice().reverse().reduce((function(i,o){return o(t,r,i)||i}),u),a&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(t,r,u),u=null),u}function user_manager_typeof(t){return user_manager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},user_manager_typeof(t)}function user_manager_defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,user_manager_toPropertyKey(o.key),o)}}function user_manager_createClass(t,r,i){return r&&user_manager_defineProperties(t.prototype,r),i&&user_manager_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function user_manager_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function user_manager_defineProperty(t,r,i){return(r=user_manager_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function user_manager_toPropertyKey(t){var r=function user_manager_toPrimitive(t,r){if("object"!==user_manager_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,r||"default");if("object"!==user_manager_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===user_manager_typeof(r)?r:String(r)}!function(t){var r=function(t){return t.addUsers="cap:um:addUsers",t.removeUsers="cap:um:removeUsers",t.addGroups="cap:um:addGroups",t.removeGroups="cap:um:removeGroups",t.promoteGroups="cap:um:promoteGroups",t.demoteGroups="cap:um:demoteGroups",t.promoteUsers="cap:um:promoteUsers",t.demoteUsers="cap:um:demoteUsers",t.editUserAttributes="cap:um:editUserAttrs",t.editUserTOAs="cap:um:editUserTOAs",t.editOwnTOAs="cap:um:editOwnTOAs",t.editOwnAttributes="cap:um:editOwnAttrs",t}({});t.UM=r;var i=function(t){return t.editOwnSettings="cap:sm:editOwnSettings",t.editGlobalSettings="cap:sm:editGlobalSettings",t.editDocumentSettings="cap:sm:editDocumentSettings",t}({});t.SM=i}(et||(et={}));var ft={en:{pronouns:{values:[{subject:"they",object:"them",possessive:{determiner:"their",pronoun:"theirs"},reflexive:"themself"}]}}},dt=user_manager_createClass((function Names(){user_manager_classCallCheck(this,Names)}));user_manager_defineProperty(dt,"userStorage","user-metadata");var ht=(tt=injectable(),nt=te(ne.Storage),rt=Reflect.metadata("design:type","undefined"==typeof StorageManager?Object:StorageManager),it=te(ne.Surgical),ot=Reflect.metadata("design:type","undefined"==typeof SurgicalEngine?Object:SurgicalEngine),tt((st=function(){function UserManager(){user_manager_classCallCheck(this,UserManager),user_manager_initializerDefineProperty(this,"StorageManager",ut,this),user_manager_initializerDefineProperty(this,"engine",ct,this)}return user_manager_createClass(UserManager,[{key:"load",value:function load(t){var r=this;Session.getActiveUser().getEmail();var i=this.StorageManager.document.getStored(dt.userStorage);for(var o in this.groups=i.groups,this.attributeMap=t,t){var a=this.engine.getSheetById(o),u=this.engine.getAllObjectsForSheet(a),c=t[o];Session.getActiveUserLocale();var l,d=user_manager_createForOfIteratorHelper(u);try{for(d.s();!(l=d.n()).done;){var h,p,g=l.value,y=g.attributes[c.email],v=i.main[g.id],m=v.groups.map((function(t){return r.groups[t]})),b=new lt({email:y,id:g.id,termsOfAddress:null!==(h=v.termsOfAddress)&&void 0!==h?h:ft,attributes:g.attributes,capabilities:null!==(p=v.capabilities)&&void 0!==p?p:[],groups:null!=m?m:[],onboarded:v.onboarded});he()(this.allUsers,[o,b.id],b),this.activeUser||this.activeUser.email!==y||(this.activeUser=b),this.emailLUT[c.email]=b.id}}catch(t){d.e(t)}finally{d.f()}}}},{key:"newUser",value:function newUser(t){var r=this;this.guard(et.UM.addUsers);var i=t.groups.flatMap((function(t){return t.capabilities})),o=t.capabilities;if(!Ye()(i.concat(o)).every((function(t){return r.activeUser.computedCapabilities.includes(t)})))throw new Error("cannot add user because they have permissions you don't");var a,u,c=we();this.engine.newObject({id:c,position:{offset:0},type:"append",sheetId:t.sheetId,attributes:(a={},user_manager_defineProperty(a,this.attributeMap[t.sheetId].email,t.email),user_manager_defineProperty(a,this.attributeMap[t.sheetId].fullName,t.fullName),a)});var l=new lt({email:t.email,id:c,termsOfAddress:t.termsOfAddress,attributes:(u={},user_manager_defineProperty(u,this.attributeMap[t.sheetId].email,t.email),user_manager_defineProperty(u,this.attributeMap[t.sheetId].fullName,t.fullName),u),capabilities:t.capabilities,groups:t.groups,onboarded:!1});this.allUsers[c]=l,this.emailLUT[t.email]=c,this.shareWithUser(this.engine.backend.spreadsheet,"edit",l),this.engine.commit()}},{key:"removeUser",value:function removeUser(t){if(this.guard(et.UM.removeUsers),!userBalance(this.activeUser,t))throw new Error("cannot remove user because they have permissions you don't");if(this.activeUser.id===t.id)throw new Error("cannot remove active user");var r=t.id,i=t.email,o=t.groups;t.attributes,delete this.allUsers[r],delete this.emailLUT[i];var a,u=user_manager_createForOfIteratorHelper(o);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=this.groupLUT[c.id].filter((function(t){return t.id!==r}));this.groupLUT[c.id]=l}}catch(t){u.e(t)}finally{u.f()}this.unshareWithUser(this.engine.backend.spreadsheet,"edit",t),this.engine.deleteObject({id:r,type:"splice"}),this.engine.commit()}},{key:"shareWithUser",value:function shareWithUser(t,r,i){var o=i.email;if(!o)throw new Error("invalid user input for sharing");switch(r){case"edit":t.addEditor(o);break;case"view":t.addViewer(o);break;default:throw new Error("invalid permission level for sharing")}}},{key:"unshareWithUser",value:function unshareWithUser(t,r,i){var o=i.email;if(!o)throw new Error("invalid user input for unsharing");switch(r){case"edit":t.removeEditor(o);break;case"view":t.removeViewer(o);break;default:throw new Error("invalid permission level for unsharing")}}},{key:"addGroup",value:function addGroup(t){if(this.guard(et.UM.addGroups),!userBalance(this.activeUser,t))throw new Error("you do not have the capability to add this group");this.groups[t.id]=t}},{key:"removeGroup",value:function removeGroup(t){if(this.guard(et.UM.removeGroups),!userBalance(this.activeUser,t))throw new Error("you do not have the capability to remove this group");delete this.groups[t.id]}},{key:"addCapabilitiesToUser",value:function addCapabilitiesToUser(t){this.guard(et.UM.promoteUsers);for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a;userHasCapabilities(this.activeUser,i)&&userBalance(this.activeUser,t)&&(a=this.allUsers[t.id].capabilities).push.apply(a,i)}},{key:"removeCapabilitiesFromUser",value:function removeCapabilitiesFromUser(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];this.guard(et.UM.demoteUsers),userBalance(this.activeUser,t),userHasCapabilities(this.activeUser,i)&&(this.allUsers[t.id].capabilities=t.capabilities.filter((function(t){return!i.includes(t)})))}},{key:"setTermsOfAddress",value:function setTermsOfAddress(t,r){this.guard(et.UM.editUserTOAs),userBalance(this.activeUser,t)&&ze()(this.allUsers[t.id].termsOfAddress,r)}},{key:"setOwnTermsOfAddress",value:function setOwnTermsOfAddress(t){this.guard(et.UM.editOwnTOAs),userBalance(this.activeUser,this.activeUser)&&ze()(this.activeUser.termsOfAddress,t)}},{key:"setAttributes",value:function setAttributes(t,r){this.guard(et.UM.editUserAttributes),userBalance(this.activeUser,t)&&ze()(this.allUsers[t.id].attributes,r)}},{key:"setOwnAttributes",value:function setOwnAttributes(t){this.guard(et.UM.editOwnAttributes),userBalance(this.activeUser,this.activeUser)&&ze()(this.activeUser.attributes,t)}},{key:"commit",value:function commit(){var t={};for(var r in this.allUsers){var i=this.allUsers[r];t[r]={termsOfAddress:i.termsOfAddress,capabilities:i.capabilities,attributes:i.attributes,groups:i.groups,onboarded:i.onboarded,locale:i.locale}}this.StorageManager.document.store(dt.userStorage,{main:t,emailLUT:this.emailLUT,groups:this.groups})}},{key:"userCan",value:function userCan(t){return this.activeUser.computedCapabilities.includes(t)}},{key:"toa",value:function toa(t,r){return t.termsOfAddress[r]}},{key:"pronouns",value:function(t,r){var i,o=t.termsOfAddress[r].pronouns;if(o.tactic)switch(o.tactic){case"alternateDaily":return i=(new Date).getDay()%o.values.length-1,o.values[i];case"alternateSentence":return new gt(t,r);case"alternateWord":return new yt(t,r);default:return o.staticIndex?o.values[o.staticIndex]:o.values[0]}}},{key:"guard",value:function guard(t){if(!this.userCan(t))throw new Error("You don't have the \"".concat(t,'" capability on your user or in any of the groups you\'re in. Either fix the spelling of the capability, add the "').concat(t,"\" capability to your user or a group you're in, or stop trying to hack the system."))}}]),UserManager}(),ut=user_manager_applyDecoratedDescriptor(st.prototype,"StorageManager",[nt,rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=user_manager_applyDecoratedDescriptor(st.prototype,"engine",[it,ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=st))||at);function userBalance(t,r){switch(r.type){case"group":return r.capabilities.every((function(r){return t.computedCapabilities.includes(r)}));case"user":return r.computedCapabilities.every((function(r){return t.computedCapabilities.includes(r)}))}}function userHasCapabilities(t,r){return r.every((function(r){return t.computedCapabilities.includes(r)}))}var pt,gt=function(){function SentencePronounGenerator(t,r){user_manager_classCallCheck(this,SentencePronounGenerator),this.index=0,this.toa=t.termsOfAddress,this.locale=r}return user_manager_createClass(SentencePronounGenerator,[{key:"endSentence",value:function endSentence(){this.index=Xe()(this.toa[this.locale].pronouns.values.length-1)}},{key:"pronoun",get:function get(){return this.toa[this.locale].pronouns.values[this.index]}}]),SentencePronounGenerator}(),yt=function(){function WordPronounGenerator(t,r){user_manager_classCallCheck(this,WordPronounGenerator),this.toa=t.termsOfAddress,this.locale=r}return user_manager_createClass(WordPronounGenerator,[{key:"pronoun",get:function get(){return this.toa[this.locale].pronouns.values[Xe()(this.toa[this.locale].pronouns.values.length-1)]}}]),WordPronounGenerator}(),vt=__webpack_require__(2579),mt=__webpack_require__.n(vt),bt=__webpack_require__(537),_t=__webpack_require__.n(bt);function utilities_typeof(t){return utilities_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},utilities_typeof(t)}function traverseObject(t,r){var traverse=function(t,i){for(var o in t){var a=t[o],u=i?"".concat(i,".").concat(o):o;r(a,u),"object"===utilities_typeof(a)&&traverse(a,u)}};traverse(t,"")}function classify(t){switch(!0){case Array.isArray(t):return"array";case"object"===utilities_typeof(t)&&null!==t:return"object";case"boolean"==typeof t:return"boolean";case _t()(t):return"number";case"string"==typeof t:return"string";case null===t:return"null";case void 0===t:return"undefined";default:return"unknown"}}function settings_manager_typeof(t){return settings_manager_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},settings_manager_typeof(t)}function settings_manager_defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,settings_manager_toPropertyKey(o.key),o)}}function settings_manager_createClass(t,r,i){return r&&settings_manager_defineProperties(t.prototype,r),i&&settings_manager_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function settings_manager_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function settings_manager_defineProperty(t,r,i){return(r=settings_manager_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function settings_manager_toPropertyKey(t){var r=function settings_manager_toPrimitive(t,r){if("object"!==settings_manager_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,r||"default");if("object"!==settings_manager_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===settings_manager_typeof(r)?r:String(r)}var wt=settings_manager_createClass((function Names(){settings_manager_classCallCheck(this,Names)}));settings_manager_defineProperty(wt,"userAttributeMap","user-attribute-map"),settings_manager_defineProperty(wt,"userSettings","user-settings"),settings_manager_defineProperty(wt,"globalSettings","global-settings"),settings_manager_defineProperty(wt,"documentSettings","document-settings");var St,kt,At,Ct,xt,Ot,jt=injectable()(pt=Reflect.metadata("design:type",Function)(pt=Reflect.metadata("design:paramtypes",[void 0===ht?Object:ht,void 0===$e?Object:$e])(pt=function(){function SettingsManager(t,r){settings_manager_classCallCheck(this,SettingsManager),this.UserManager=t,this.StorageManager=r}return settings_manager_createClass(SettingsManager,[{key:"registerSettings",value:function registerSettings(t){var r={},i="",o={group:function group(t,a,u){(t.includes(".")||"children"===t)&&he()(r,"".concat(i,".").concat(t),{id:t,type:a}),i="".concat(i,".").concat(t,".children"),u(o),i=i.replace(".".concat(t,".children"),"")},setting:function setting(t,o,a){he()(r,"".concat(i,".").concat(t),{id:t,type:o,defaultValue:a})}};t(o),this._settings=r}},{key:"getSettings",value:function getSettings(){return this._settings}},{key:"_valuePathToOptionPath",value:function _valuePathToOptionPath(t){return t.replaceAll(".",".children.")}},{key:"_OptionPathToValuePath",value:function _OptionPathToValuePath(t){return t.replaceAll(".children.",".")}},{key:"getOption",value:function getOption(t){var r=mt()(this._values,t),i=mt()(this._settings,t.replaceAll(".",".children."));if(i)return null!=r?r:i.defaultValue;throw new Error("Unknown setting: ".concat(t,". Try adding the setting definition to your code."))}},{key:"getSettingMetadata",value:function getSettingMetadata(t){if(t.includes(".children"))throw new Error("Input setting ID '".concat(t,"' is using SettingsManager Option notation, not the required Value notation."));return mt()(this._settings,this._valuePathToOptionPath(t))}},{key:"_setSetting",value:function _setSetting(t,r){var i=mt()(this._settings,this._valuePathToOptionPath(t));if(classify(r)!==i.type)throw new Error("Invalid value (".concat(r.toString(),") for setting ").concat(t,". Expected type ").concat(i.type,", got type ").concat(classify(r)," instead."));he()(this._values,t,r)}},{key:"setSetting",value:function setSetting(t,r){switch(this.getSettingMetadata(t).scope){case"user":this.UserManager.userCan(et.SM.editOwnSettings)&&this._setSetting(t,r);break;case"global":this.UserManager.userCan(et.SM.editGlobalSettings)&&this._setSetting(t,r);break;case"document":this.UserManager.userCan(et.SM.editDocumentSettings)&&this._setSetting(t,r);default:this.UserManager.userCan(et.SM.editGlobalSettings)&&this._setSetting(t,r)}}},{key:"populate",value:function populate(){var t=this,r=this.StorageManager.user.getStored(wt.userSettings),i=this.StorageManager.script.getStored(wt.globalSettings),o=this.StorageManager.document.getStored(wt.documentSettings);traverseObject(r,(function(r,i){"user"===t.getSettingMetadata(i).scope&&t._setSetting(i,r)})),traverseObject(i,(function(r,i){"global"===t.getSettingMetadata(i).scope&&t._setSetting(i,r)})),traverseObject(o,(function(r,i){"document"===t.getSettingMetadata(i).scope&&t._setSetting(i,r)}))}},{key:"commit",value:function commit(){var t=this,r={},i={},o={};traverseObject(this._values,(function(a,u){var c=t.getSettingMetadata(u);if(!c)throw new Error("Unknown setting: ".concat(u,". Try adding the setting definition to your code. For security reasons, your settings won't be committed."));switch(c.scope){case"user":t.UserManager.userCan(et.SM.editOwnSettings)&&he()(r,u,a);break;case"global":default:t.UserManager.userCan(et.SM.editGlobalSettings)&&he()(i,u,a);break;case"document":t.UserManager.userCan(et.SM.editDocumentSettings)&&he()(o,u,a)}})),this.StorageManager.user.store(wt.userSettings,r),this.StorageManager.script.store(wt.globalSettings,i),this.StorageManager.document.store(wt.documentSettings,o)}}]),SettingsManager}())||pt)||pt)||pt;function socket_toConsumableArray(t){return function socket_arrayWithoutHoles(t){if(Array.isArray(t))return socket_arrayLikeToArray(t)}(t)||function socket_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function socket_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return socket_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return socket_arrayLikeToArray(t,r)}(t)||function socket_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function socket_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function socket_typeof(t){return socket_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},socket_typeof(t)}function socket_defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,socket_toPropertyKey(o.key),o)}}function socket_createClass(t,r,i){return r&&socket_defineProperties(t.prototype,r),i&&socket_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function socket_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function socket_defineProperty(t,r,i){return(r=socket_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}function socket_toPropertyKey(t){var r=function socket_toPrimitive(t,r){if("object"!==socket_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,r||"default");if("object"!==socket_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===socket_typeof(r)?r:String(r)}var It=socket_createClass((function Names(){socket_classCallCheck(this,Names)}));socket_defineProperty(It,"socketCache","socket-cache");var Tt,Pt=(St=injectable(),kt=te(ne.Storage),At=Reflect.metadata("design:type","undefined"==typeof StorageManager?Object:StorageManager),St((xt=function(){function Socketeer(){socket_classCallCheck(this,Socketeer),function socket_initializerDefineProperty(t,r,i,o){i&&Object.defineProperty(t,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(o):void 0})}(this,"StorageManager",Ot,this),socket_defineProperty(this,"checkupCallback",void 0)}return socket_createClass(Socketeer,[{key:"checkup",value:function checkup(){var t=this.StorageManager.user.getCached(It.socketCache);return this.StorageManager.user.cache(It.socketCache,{}),t}},{key:"sendDown",value:function sendDown(t){var r=this.StorageManager.user.getCached(It.socketCache);if(r){r.messages.push(t);var i=r.messages.map((function(t){return t.nextPoll}));r.nextPoll=Math.min.apply(Math,socket_toConsumableArray(i)),this.StorageManager.user.cache(It.socketCache,r)}else{var o;this.StorageManager.user.cache(It.socketCache,{nextPoll:null!==(o=t.nextPoll)&&void 0!==o?o:5e3,messages:[t]})}}},{key:"onCheckup",value:function onCheckup(t){this.checkupCallback=t}}]),Socketeer}(),Ot=function socket_applyDecoratedDescriptor(t,r,i,o,a){var u={};return Object.keys(o).forEach((function(t){u[t]=o[t]})),u.enumerable=!!u.enumerable,u.configurable=!!u.configurable,("value"in u||u.initializer)&&(u.writable=!0),u=i.slice().reverse().reduce((function(i,o){return o(t,r,i)||i}),u),a&&void 0!==u.initializer&&(u.value=u.initializer?u.initializer.call(a):void 0,u.initializer=void 0),void 0===u.initializer&&(Object.defineProperty(t,r,u),u=null),u}(xt.prototype,"StorageManager",[kt,At],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=xt))||Ct);function concurrency_typeof(t){return concurrency_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},concurrency_typeof(t)}function concurrency_regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */concurrency_regeneratorRuntime=function _regeneratorRuntime(){return r};var t,r={},i=Object.prototype,o=i.hasOwnProperty,a=Object.defineProperty||function(t,r,i){t[r]=i.value},u="function"==typeof Symbol?Symbol:{},c=u.iterator||"@@iterator",l=u.asyncIterator||"@@asyncIterator",d=u.toStringTag||"@@toStringTag";function define(t,r,i){return Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{define({},"")}catch(t){define=function define(t,r,i){return t[r]=i}}function wrap(t,r,i,o){var u=r&&r.prototype instanceof Generator?r:Generator,c=Object.create(u.prototype),l=new Context(o||[]);return a(c,"_invoke",{value:makeInvokeMethod(t,i,l)}),c}function tryCatch(t,r,i){try{return{type:"normal",arg:t.call(r,i)}}catch(t){return{type:"throw",arg:t}}}r.wrap=wrap;var h="suspendedStart",p="executing",g="completed",y={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var v={};define(v,c,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(values([])));b&&b!==i&&o.call(b,c)&&(v=b);var _=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(v);function defineIteratorMethods(t){["next","throw","return"].forEach((function(r){define(t,r,(function(t){return this._invoke(r,t)}))}))}function AsyncIterator(t,r){function invoke(i,a,u,c){var l=tryCatch(t[i],t,a);if("throw"!==l.type){var d=l.arg,h=d.value;return h&&"object"==concurrency_typeof(h)&&o.call(h,"__await")?r.resolve(h.__await).then((function(t){invoke("next",t,u,c)}),(function(t){invoke("throw",t,u,c)})):r.resolve(h).then((function(t){d.value=t,u(d)}),(function(t){return invoke("throw",t,u,c)}))}c(l.arg)}var i;a(this,"_invoke",{value:function value(t,o){function callInvokeWithMethodAndArg(){return new r((function(r,i){invoke(t,o,r,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(r,i,o){var a=h;return function(u,c){if(a===p)throw new Error("Generator is already running");if(a===g){if("throw"===u)throw c;return{value:t,done:!0}}for(o.method=u,o.arg=c;;){var l=o.delegate;if(l){var d=maybeInvokeDelegate(l,o);if(d){if(d===y)continue;return d}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===h)throw a=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=p;var v=tryCatch(r,i,o);if("normal"===v.type){if(a=o.done?g:"suspendedYield",v.arg===y)continue;return{value:v.arg,done:o.done}}"throw"===v.type&&(a=g,o.method="throw",o.arg=v.arg)}}}function maybeInvokeDelegate(r,i){var o=i.method,a=r.iterator[o];if(a===t)return i.delegate=null,"throw"===o&&r.iterator.return&&(i.method="return",i.arg=t,maybeInvokeDelegate(r,i),"throw"===i.method)||"return"!==o&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+o+"' method")),y;var u=tryCatch(a,r.iterator,i.arg);if("throw"===u.type)return i.method="throw",i.arg=u.arg,i.delegate=null,y;var c=u.arg;return c?c.done?(i[r.resultName]=c.value,i.next=r.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,y):c:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}function pushTryEntry(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function resetTryEntry(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(r){if(r||""===r){var i=r[c];if(i)return i.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,u=function next(){for(;++a<r.length;)if(o.call(r,a))return next.value=r[a],next.done=!1,next;return next.value=t,next.done=!0,next};return u.next=u}}throw new TypeError(concurrency_typeof(r)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,a(_,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),a(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,d,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===GeneratorFunction||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,d,"GeneratorFunction")),t.prototype=Object.create(_),t},r.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,l,(function(){return this})),r.AsyncIterator=AsyncIterator,r.async=function(t,i,o,a,u){void 0===u&&(u=Promise);var c=new AsyncIterator(wrap(t,i,o,a),u);return r.isGeneratorFunction(i)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(_),define(_,d,"Generator"),define(_,c,(function(){return this})),define(_,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),i=[];for(var o in r)i.push(o);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in r)return next.value=t,next.done=!1,next}return next.done=!0,next}},r.values=values,Context.prototype={constructor:Context,reset:function reset(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!r)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(r){if(this.done)throw r;var i=this;function handle(o,a){return c.type="throw",c.arg=r,i.next=o,a&&(i.method="next",i.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],c=u.completion;if("root"===u.tryLoc)return handle("end");if(u.tryLoc<=this.prev){var l=o.call(u,"catchLoc"),d=o.call(u,"finallyLoc");if(l&&d){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0);if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}else if(l){if(this.prev<u.catchLoc)return handle(u.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return handle(u.finallyLoc)}}}},abrupt:function abrupt(t,r){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&o.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var u=a;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=r&&r<=u.finallyLoc&&(u=null);var c=u?u.completion:{};return c.type=t,c.arg=r,u?(this.method="next",this.next=u.finallyLoc,y):this.complete(c)},complete:function complete(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function finish(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),y}},catch:function _catch(t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var a=o.arg;resetTryEntry(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(r,i,o){return this.delegate={iterator:values(r),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=t),y}},r}function concurrency_toConsumableArray(t){return function concurrency_arrayWithoutHoles(t){if(Array.isArray(t))return concurrency_arrayLikeToArray(t)}(t)||function concurrency_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function concurrency_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return concurrency_arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return concurrency_arrayLikeToArray(t,r)}(t)||function concurrency_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function concurrency_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function asyncGeneratorStep(t,r,i,o,a,u,c){try{var l=t[u](c),d=l.value}catch(t){return void i(t)}l.done?r(d):Promise.resolve(d).then(o,a)}function concurrency_defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,concurrency_toPropertyKey(o.key),o)}}function concurrency_createClass(t,r,i){return r&&concurrency_defineProperties(t.prototype,r),i&&concurrency_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function concurrency_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function concurrency_toPropertyKey(t){var r=function concurrency_toPrimitive(t,r){if("object"!==concurrency_typeof(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,r||"default");if("object"!==concurrency_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===concurrency_typeof(r)?r:String(r)}var Mt=concurrency_createClass((function Names(){concurrency_classCallCheck(this,Names)}));!function concurrency_defineProperty(t,r,i){return(r=concurrency_toPropertyKey(r))in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t}(Mt,"universal","TURNSTILE_CONCURRENCY_");var Rt=injectable()(Tt=Reflect.metadata("design:type",Function)(Tt=Reflect.metadata("design:paramtypes",[String,String])(Tt=function(){function Turnstile(t,r){concurrency_classCallCheck(this,Turnstile),this.name=t,this.type=r,this.id=we()}var t;return concurrency_createClass(Turnstile,[{key:"enter",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(o,a){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,o,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,o,a,_next,_throw,"throw",t)}_next(void 0)}))}}(concurrency_regeneratorRuntime().mark((function _callee(t,r){var i;return concurrency_regeneratorRuntime().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:this.get(this.name)?this.get(this.name)[0]!==this.id&&this.set(this.name,[].concat(concurrency_toConsumableArray(this.get(this.name)),[this.id])):this.set(this.name,[this.id]),i=0;case 2:if(!(i<t/1e3)){o.next=9;break}if(Utilities.sleep(10),this.get(this.name)[0]!==this.id&&this.get(this.name)){o.next=6;break}return o.abrupt("return",!0);case 6:i+=10,o.next=2;break;case 9:if(this.exit(),!r){o.next=14;break}throw new Error("Turnstile was occupied for too long.");case 14:return o.abrupt("return",!1);case 15:case"end":return o.stop()}}),_callee,this)}))),function enter(r,i){return t.apply(this,arguments)})},{key:"exit",value:function exit(){var t=this.get(this.name),r=t.splice(t.indexOf(this.id));0!==r.length?this.set(this.name,r):this.delete(this.name)}},{key:"get",value:function get(t){switch(this.type){case"document":return JSON.parse(CacheService.getDocumentCache().get(Mt.universal+t));case"script":return JSON.parse(CacheService.getScriptCache().get(Mt.universal+t));case"user":return JSON.parse(CacheService.getUserCache().get(Mt.universal+t))}}},{key:"set",value:function set(t,r){switch(this.type){case"document":CacheService.getDocumentCache().put(Mt.universal+t,JSON.stringify(r));break;case"script":CacheService.getScriptCache().put(Mt.universal+t,JSON.stringify(r));break;case"user":CacheService.getUserCache().put(Mt.universal+t,JSON.stringify(r))}}},{key:"delete",value:function _delete(t){switch(this.type){case"document":CacheService.getDocumentCache().remove(Mt.universal+t);break;case"script":CacheService.getScriptCache().remove(Mt.universal+t);break;case"user":CacheService.getUserCache().remove(Mt.universal+t)}}}]),Turnstile}())||Tt)||Tt)||Tt,Et=new ee({autoBindInjectable:!1});Et.bind(ne.Surgical).to(ce).inSingletonScope(),Et.bind(ne.User).to(ht).inSingletonScope(),Et.bind(ne.Storage).to($e).inSingletonScope(),Et.bind(ne.Matrix).to(We).inSingletonScope(),Et.bind(ne.Settings).to(jt).inSingletonScope(),Et.bind(ne.Socketeer).to(Pt).inSingletonScope(),Et.bind(ne.Turnstile).toConstructor(Rt);var Nt=Et.get(ne.Socketeer);globalThis.socketeer=Nt.checkup.bind(Nt);var Bt="https://asc.articleman.org";__webpack_require__.g.onOpen=function(){SpreadsheetApp.getUi().createMenu("Articleman").addItem("Open Articleman...","showSidebar").addItem("Open help...","showHelp").addToUi()},__webpack_require__.g.setSettings=setSettings,__webpack_require__.g.getSettings=getSettings,__webpack_require__.g.onSelectionChange=function(){var t=SpreadsheetApp.getActiveSheet(),r=t.getActiveCell().getRow(),i=t.getActiveCell().getColumn();CacheService.getUserCache().put("currentRow",JSON.stringify({row:r,column:i,sheet:t.getName()}),21600)},__webpack_require__.g.showSidebar=function(){SpreadsheetApp.getUi().showSidebar(HtmlService.createHtmlOutput(UrlFetchApp.fetch(Bt)).setTitle("Articleman"))},__webpack_require__.g.showHelp=function(){CacheService.getUserCache().put("help","true",20),__webpack_require__.g.showSidebar()},__webpack_require__.g.onInstall=function(){__webpack_require__.g.showSidebar()}})()})();